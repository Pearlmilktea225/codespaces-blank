local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
    Name = "çå¥¶è…³æœ¬ | çµ‚æ¥µå…¨èƒ½ã€Œç¨è‡ªå‡ç´šã€è—è¡“ç‰ˆ",
    LoadingTitle = "ç³»çµ±æ­£åœ¨å•Ÿå‹•ï¼šç¨è‡ªå‡ç´šä¸­...",
    LoadingSubtitle = "By çå¥¶ (ZhenNai) - Solo Leveling Edition",
    ConfigurationSaving = { Enabled = true, FolderName = "ZhenNai_SoloLeveling", FileName = "Config" },
    KeySystem = false, 
})

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local Camera = game.Workspace.CurrentCamera
local UserInputService = game:GetService("UserInputService")
local Lighting = game:GetService("Lighting")
local HttpService = game:GetService("HttpService") -- ç”¨æ–¼ç”Ÿæˆå”¯ä¸€ID

-- çµ‚æ¥µè¨­å®šæª”
local Config = {
    -- æˆ°é¬¥æ ¸å¿ƒ
    Aimbot = false,
    AimbotFOV = 150,
    AimbotSmoothness = 0.5,
    HitboxExpander = false,
    HitboxMultiplier = 3,
    NoCD = false,
    AntiGrip = false,
    AutoBlock = false,
    AutoCounter = false,

    -- ç©å®¶å¼·åŒ–
    GodMode = false,
    SpeedEnabled = false,
    Speed = 25,
    JumpPower = 50,
    JumpEnabled = false,
    InfJump = false,
    FlyEnabled = false,
    Flying = false,

    -- è¦–è¦ºç‰¹æ•ˆ (ç¨è‡ªå‡ç´šé¢¨æ ¼)
    ESP = false,
    ESPStyle = "é™°å½±é‡‘å±¬", -- "é‡‘å±¬è—", "è¡€ç´…", "æš—å½±é‡‘å±¬"
    Tracers = false,
    NameTags = false,
    HealthBars = false,
    Fullbright = false,
    RemoveEffects = false,

    -- ç¥åŠ›å…‰ç’° (é«˜é¢¨éšª)
    AuraEnabled = false,
    AuraMode = "å¸é™„",
    AuraRadius = 20,
    AuraForce = 50,
    
    -- ä»‹é¢
    OverlayButtonSize = 65,
    OverlayButtonTransparency = 0.4,
}

--------------------------------------------------------------------------------
-- è¢å¹•æ“ä½œä»‹é¢ (Overlay)
--------------------------------------------------------------------------------
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "ZhenNai_Overlay"
ScreenGui.Parent = game.CoreGui 

-- é£›è¡ŒæŒ‰éˆ•
local FlyButton = Instance.new("TextButton")
FlyButton.Name = "FlyButton"
FlyButton.Parent = ScreenGui
FlyButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
FlyButton.BackgroundTransparency = Config.OverlayButtonTransparency
FlyButton.Position = UDim2.new(0.85, 0, 0.70, 0) 
FlyButton.Size = UDim2.new(0, Config.OverlayButtonSize, 0, Config.OverlayButtonSize / 2)
FlyButton.Font = Enum.Font.GothamBold
FlyButton.Text = "é£›è¡Œ"
FlyButton.TextColor3 = Color3.fromRGB(255, 255, 255)
FlyButton.TextSize = 16
FlyButton.Visible = false 

local UICorner_Fly = Instance.new("UICorner")
UICorner_Fly.CornerRadius = UDim.new(0, 5) 
UICorner_Fly.Parent = FlyButton

local UIStroke_Fly = Instance.new("UIStroke")
UIStroke_Fly.Parent = FlyButton
UIStroke_Fly.Color = Color3.fromRGB(255, 255, 255)
UIStroke_Fly.Thickness = 1
UIStroke_Fly.ApplyStrokeMode = Enum.ApplyStrokeMode.Border

FlyButton.MouseButton1Click:Connect(function()
    Config.Flying = not Config.Flying
    if Config.Flying then
        FlyButton.Text = "é£›è¡Œä¸­"
        UIStroke_Fly.Color = Color3.fromRGB(0, 255, 0)
    else
        FlyButton.Text = "é£›è¡Œ"
        UIStroke_Fly.Color = Color3.fromRGB(255, 255, 255)
    end
end)

-- è‡ªç„æŒ‰éˆ• (å’Œä¹‹å‰ä¸€æ¨£ï¼Œè«‹è‡ªè¡Œèª¿æ•´ä½ç½®)
local AimButton = Instance.new("TextButton")
AimButton.Name = "AimButton"
AimButton.Parent = ScreenGui
AimButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
AimButton.BackgroundTransparency = Config.OverlayButtonTransparency
AimButton.Position = UDim2.new(0.85, 0, 0.55, 0) 
AimButton.Size = UDim2.new(0, Config.OverlayButtonSize, 0, Config.OverlayButtonSize)
AimButton.Font = Enum.Font.GothamBold
AimButton.Text = "ç„æº–"
AimButton.TextColor3 = Color3.fromRGB(255, 255, 255)
AimButton.TextSize = 18
AimButton.Visible = false 

local UICorner_Aim = Instance.new("UICorner")
UICorner_Aim.CornerRadius = UDim.new(1, 0) 
UICorner_Aim.Parent = AimButton

local UIStroke_Aim = Instance.new("UIStroke")
UIStroke_Aim.Parent = AimButton
UIStroke_Aim.Color = Color3.fromRGB(255, 255, 255)
UIStroke_Aim.Thickness = 2
UIStroke_Aim.ApplyStrokeMode = Enum.ApplyStrokeMode.Border

AimButton.MouseButton1Down:Connect(function()
    Config.Aimbot = true -- æ¿€æ´»ç„æº–ç‹€æ…‹
    UIStroke_Aim.Color = Color3.fromRGB(255, 0, 0) 
    AimButton.Text = "é–å®š"
end)
AimButton.MouseButton1Up:Connect(function()
    Config.Aimbot = false -- å–æ¶ˆç„æº–ç‹€æ…‹
    UIStroke_Aim.Color = Color3.fromRGB(255, 255, 255) 
    AimButton.Text = "ç„æº–"
end)
AimButton.MouseLeave:Connect(function() -- é˜²æ­¢æ‰‹æ»‘é›¢é–‹æŒ‰éˆ•å¾Œä»é–å®š
    Config.Aimbot = false
    UIStroke_Aim.Color = Color3.fromRGB(255, 255, 255)
    AimButton.Text = "ç„æº–"
end)

--------------------------------------------------------------------------------
-- Rayfield GUI åˆ†é 
--------------------------------------------------------------------------------
local CombatTab = Window:CreateTab("ğŸ—¡ï¸ æˆ°é¬¥æ ¸å¿ƒ", 4483362458)
local PlayerTab = Window:CreateTab("ğŸƒâ€â™‚ï¸ ç©å®¶å¼·åŒ–", 4483362458)
local VisualFXTab = Window:CreateTab("âœ¨ è¦–è¦ºç‰¹æ•ˆ (ç¨è‡ªå‡ç´š)", 4483362458)
local AuraTab = Window:CreateTab("ğŸŒ€ ç¥åŠ›å…‰ç’° (é«˜é¢¨éšª)", 4483362458)
local SettingsTab = Window:CreateTab("âš™ï¸ è…³æœ¬è¨­å®š", 4483362458)

-- [æˆ°é¬¥æ ¸å¿ƒ]
CombatTab:CreateSection("è‡ªç„èˆ‡åˆ¤å®š")
CombatTab:CreateToggle({
    Name = "å•Ÿç”¨è‡ªç„è¼”åŠ© (Aimbot)",
    CurrentValue = false,
    Callback = function(v) 
        Config.Aimbot = v
        AimButton.Visible = v 
    end,
})
CombatTab:CreateSlider({
    Name = "è‡ªç„ç¯„åœ (FOV)",
    Range = {50, 500},
    Increment = 10,
    CurrentValue = Config.AimbotFOV,
    Callback = function(v) Config.AimbotFOV = v end,
})
CombatTab:CreateSlider({
    Name = "è‡ªç„å¹³æ»‘åº¦ (Smoothness)",
    Range = {1, 10},
    Increment = 1,
    CurrentValue = Config.AimbotSmoothness * 10,
    Callback = function(v) Config.AimbotSmoothness = v / 10 end,
})
CombatTab:CreateToggle({
    Name = "å¤§ç¯„åœæ”»æ“Šåˆ¤å®š (Hitbox Expander)",
    CurrentValue = false,
    Callback = function(v) Config.HitboxExpander = v end,
})
CombatTab:CreateSlider({
    Name = "åˆ¤å®šæ“´å¤§å€æ•¸",
    Range = {1.2, 5},
    Increment = 0.1,
    CurrentValue = Config.HitboxMultiplier,
    Callback = function(v) Config.HitboxMultiplier = v end,
})

CombatTab:CreateSection("é˜²ç¦¦èˆ‡æŠ€èƒ½")
CombatTab:CreateToggle({
    Name = "æŠ€èƒ½ç„¡å†·å» (No CD / Beta)",
    CurrentValue = false,
    Callback = function(v) Config.NoCD = v end,
})
CombatTab:CreateToggle({
    Name = "è‡ªå‹•æ ¼æ“‹ (Auto Block)",
    CurrentValue = false,
    Callback = function(v) Config.AutoBlock = v end,
})
CombatTab:CreateToggle({
    Name = "è‡ªå‹•åæ“Š (Auto Counter / ç¬ç§»)",
    CurrentValue = false,
    Callback = function(v) Config.AutoCounter = v end,
})
CombatTab:CreateToggle({
    Name = "åé€£æ®µ/åæŠ“å– (Anti-Grip)",
    CurrentValue = false,
    Callback = function(v) Config.AntiGrip = v end,
})

-- [ç©å®¶å¼·åŒ–]
PlayerTab:CreateSection("å±¬æ€§ä¿®æ”¹")
PlayerTab:CreateToggle({
    Name = "ä¸Šå¸æ¨¡å¼ (God Mode / é«˜é¢¨éšª)",
    CurrentValue = false,
    Callback = function(v) Config.GodMode = v end,
})
PlayerTab:CreateToggle({
    Name = "å•Ÿç”¨é€Ÿåº¦ä¿®æ”¹",
    CurrentValue = false,
    Callback = function(v) Config.SpeedEnabled = v end,
})
PlayerTab:CreateSlider({
    Name = "ç§»å‹•é€Ÿåº¦",
    Range = {16, 200},
    Increment = 5,
    CurrentValue = Config.Speed,
    Callback = function(v) Config.Speed = v end,
})
PlayerTab:CreateToggle({
    Name = "å•Ÿç”¨è·³èºä¿®æ”¹",
    CurrentValue = false,
    Callback = function(v) Config.JumpEnabled = v end,
})
PlayerTab:CreateSlider({
    Name = "è·³èºé«˜åº¦ (Jump Power)",
    Range = {50, 200},
    Increment = 10,
    CurrentValue = Config.JumpPower,
    Callback = function(v) Config.JumpPower = v end,
})
PlayerTab:CreateToggle({
    Name = "ç„¡é™è·³èº (Infinite Jump)",
    CurrentValue = false,
    Callback = function(v) Config.InfJump = v end,
})
PlayerTab:CreateToggle({
    Name = "å•Ÿç”¨é£›è¡Œ (Fly Hack)",
    CurrentValue = false,
    Callback = function(v) 
        Config.FlyEnabled = v
        FlyButton.Visible = v
        if not v and Config.Flying then
            Config.Flying = false
            FlyButton.Text = "é£›è¡Œ"
            UIStroke_Fly.Color = Color3.fromRGB(255, 255, 255)
            if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
                LocalPlayer.Character.Humanoid.PlatformStand = false
            end
        end
    end,
})

-- [è¦–è¦ºç‰¹æ•ˆ (ç¨è‡ªå‡ç´šé¢¨æ ¼)]
VisualFXTab:CreateSection("æ•µäººæ¨™è¨˜ (ç³»çµ±é¢¨æ ¼)")
VisualFXTab:CreateToggle({
    Name = "å•Ÿç”¨æ•µäººæ¨™è¨˜ (ESP)",
    CurrentValue = false,
    Callback = function(v) Config.ESP = v end,
})
VisualFXTab:CreateDropdown({
    Name = "æ¨™è¨˜é¢¨æ ¼",
    Options = {"é™°å½±é‡‘å±¬", "å†°è—æ•¸æ“šæµ", "è¡€ç´…è­¦ç¤º", "æš—å½±è„ˆè¡"},
    CurrentIndex = 1,
    Callback = function(option) Config.ESPStyle = option end,
})
VisualFXTab:CreateToggle({
    Name = "é€£ç·šè¿½è¹¤ (Tracers)",
    CurrentValue = false,
    Callback = function(v) Config.Tracers = v end,
})
VisualFXTab:CreateToggle({
    Name = "é¡¯ç¤ºåç¨± (NameTags)",
    CurrentValue = false,
    Callback = function(v) Config.NameTags = v end,
})
VisualFXTab:CreateToggle({
    Name = "é¡¯ç¤ºè¡€æ¢ (HealthBars)",
    CurrentValue = false,
    Callback = function(v) Config.HealthBars = v end,
})

VisualFXTab:CreateSection("ç’°å¢ƒèˆ‡å„ªåŒ–")
VisualFXTab:CreateToggle({
    Name = "å¤œè¦–æ¨¡å¼ (Fullbright)",
    CurrentValue = false,
    Callback = function(v)
        Config.Fullbright = v
        if v then
            Lighting.Ambient = Color3.fromRGB(255, 255, 255)
            Lighting.Brightness = 2
            Lighting.ClockTime = 14
        else
            Lighting.Ambient = Color3.fromRGB(127, 127, 127)
            Lighting.Brightness = 1
            Lighting.ClockTime = 12
        end
    end,
})
VisualFXTab:CreateToggle({
    Name = "æ€§èƒ½æ¨¡å¼ (ç§»é™¤éŠæˆ²ç‰¹æ•ˆ)",
    CurrentValue = false,
    Callback = function(v) Config.RemoveEffects = v end,
})

-- [ç¥åŠ›å…‰ç’° (é«˜é¢¨éšª)]
AuraTab:CreateSection("!!! ç©å®¶äº’å‹•å…‰ç’° - æ¥µé«˜é¢¨éšªè­¦å‘Š !!!")
AuraTab:CreateLabel("æ­¤åŠŸèƒ½ç›´æ¥å½±éŸ¿å…¶ä»–ç©å®¶ï¼Œæ¥µæ˜“è¢«éŠæˆ²ç®¡ç†å“¡åµæ¸¬å’Œè¸¢å‡ºï¼")
AuraTab:CreateToggle({
    Name = "å•Ÿç”¨ç¥åŠ›å…‰ç’°",
    CurrentValue = false,
    Callback = function(v) Config.AuraEnabled = v end,
})
AuraTab:CreateDropdown({
    Name = "å…‰ç’°æ¨¡å¼",
    Options = {"å¸é™„ (Pull)", "æ“Šé£› (Push)", "æ—‹è½‰ (Spin)"},
    CurrentIndex = 1,
    Callback = function(option) Config.AuraMode = option end,
})
AuraTab:CreateSlider({
    Name = "å…‰ç’°ç¯„åœ (Radius)",
    Range = {10, 50},
    Increment = 5,
    CurrentValue = Config.AuraRadius,
    Callback = function(v) Config.AuraRadius = v end,
})
AuraTab:CreateSlider({
    Name = "å…‰ç’°å¼·åº¦ (Force)",
    Range = {10, 100},
    Increment = 10,
    CurrentValue = Config.AuraForce,
    Callback = function(v) Config.AuraForce = v end,
})

-- [è…³æœ¬è¨­å®š]
SettingsTab:CreateSection("ä»‹é¢ç®¡ç†")
SettingsTab:CreateButton({
    Name = "ç¸®å°é¸å–® (Hide Menu)",
    Callback = function()
        local library = game.CoreGui:FindFirstChild("Rayfield")
        if library and library:FindFirstChild("Main") then
             library.Main.Visible = false
        end
        Rayfield:Notify({Title = "æç¤º", Content = "é¸å–®å·²éš±è—ã€‚é»æ“Šå°ç¶ éˆ•å¯å†æ¬¡é–‹å•Ÿã€‚", Duration = 3, Image = 4483362458})
    end,
})
SettingsTab:CreateSlider({
    Name = "æµ®å‹•æŒ‰éˆ•å¤§å° (Overlay Size)",
    Range = {40, 100},
    Increment = 5,
    CurrentValue = Config.OverlayButtonSize,
    Callback = function(v) 
        Config.OverlayButtonSize = v
        FlyButton.Size = UDim2.new(0, v, 0, v / 2)
        AimButton.Size = UDim2.new(0, v, 0, v)
    end,
})
SettingsTab:CreateSlider({
    Name = "æµ®å‹•æŒ‰éˆ•é€æ˜åº¦ (Transparency)",
    Range = {0, 100},
    Increment = 10,
    CurrentValue = Config.OverlayButtonTransparency * 100,
    Callback = function(v) 
        Config.OverlayButtonTransparency = v / 100
        FlyButton.BackgroundTransparency = v / 100
        AimButton.BackgroundTransparency = v / 100
    end,
})
SettingsTab:CreateButton({
    Name = "å¸è¼‰è…³æœ¬ (Destroy UI)",
    Callback = function()
        ScreenGui:Destroy()
        Rayfield:Destroy()
    end,
})

--------------------------------------------------------------------------------
-- æ ¸å¿ƒé‚è¼¯å¯¦ç¾
--------------------------------------------------------------------------------

-- ç„¡é™è·³èº
UserInputService.JumpRequest:Connect(function()
    if Config.InfJump and LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Humanoid") then
        LocalPlayer.Character:FindFirstChildOfClass("Humanoid"):ChangeState("Jumping")
    end
end)

-- ç§»é™¤ç‰¹æ•ˆ
game.Workspace.DescendantAdded:Connect(function(v)
    if Config.RemoveEffects and (v:IsA("ParticleEmitter") or v:IsA("Explosion") or v:IsA("Fire") or v:IsA("Smoke") or v:IsA("Trail") or v:IsA("Beam")) then
        v.Enabled = false
    end
end)

-- TSB å°ˆç”¨è‡ªå‹•åæ“Š/åæŠ“å– (ç°¡åŒ–é‚è¼¯)
-- TSB çš„ç²¾ç¢ºåæ“Šéœ€è¦åˆ†ææ”»æ“Š RemoteEventï¼Œé€™æ˜¯ä¸€å€‹è¤‡é›œçš„é€†å‘å·¥ç¨‹éç¨‹ã€‚
-- é€™è£¡åƒ…æä¾›ä¸€å€‹åŸºæ–¼æ•µäººç‹€æ…‹çš„ç°¡åŒ–ç‰ˆæœ¬ã€‚
local lastAttackTime = {}
RunService.Stepped:Connect(function()
    if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
        local myHumanoid = LocalPlayer.Character.Humanoid
        local myRoot = LocalPlayer.Character:FindFirstChild("HumanoidRootPart")

        -- åæŠ“å–
        if Config.AntiGrip and myHumanoid.Sit then -- å¦‚æœè§’è‰²åä¸‹äº† (è¢«æŠ“å–çš„ä¸€å€‹å¸¸è¦‹ç‹€æ…‹)
            -- å˜—è©¦ç¬é–“ç§»å‹•ä¾†è„«é›¢æŠ“å– (å¯èƒ½æœƒè¢«åµæ¸¬)
            if myRoot then
                myRoot.CFrame = myRoot.CFrame * CFrame.new(0, 5, 0) -- å‘ä¸Šç¬ç§»
                -- ä¹Ÿå¯ä»¥å˜—è©¦ç™¼é€åæŠ“å– RemoteEvent (å¦‚æœéŠæˆ²æœ‰æ­¤æ©Ÿåˆ¶)
            end
        end

        -- è‡ªå‹•åæ“Š (æ•µäººæ”»æ“Šåˆ°æˆ‘æ™‚ï¼Œå˜—è©¦ç¬ç§»åˆ°èƒŒå¾Œ)
        if Config.AutoCounter and myRoot then
            for _, player in pairs(Players:GetPlayers()) do
                if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild("Humanoid") then
                    local enemyHumanoid = player.Character.Humanoid
                    local enemyRoot = player.Character:FindFirstChild("HumanoidRootPart")
                    if enemyHumanoid and enemyRoot then
                        local distance = (myRoot.Position - enemyRoot.Position).Magnitude
                        -- ç°¡æ˜“åˆ¤æ–·ï¼šå¦‚æœæ•µäººåœ¨æ”»æ“Šå‹•ç•«ä¸­ä¸”é›¢æˆ‘å¾ˆè¿‘
                        if distance < 8 and enemyHumanoid.Health < enemyHumanoid.MaxHealth and (os.time() - (lastAttackTime[player.Name] or 0) > 1) then
                            -- å‡è¨­æ•µäººæ­£åœ¨æ”»æ“Šï¼Œå˜—è©¦ç¬ç§»
                            myRoot.CFrame = enemyRoot.CFrame * CFrame.new(0, 0, 5) -- ç¬ç§»åˆ°æ•µäººèº«å¾Œ
                            lastAttackTime[player.Name] = os.time()
                            break -- æ¯æ¬¡åªåæ“Šä¸€å€‹æ•µäºº
                        end
                    end
                end
            end
        end

        -- è‡ªå‹•æ ¼æ“‹ (éœ€è¦æ›´ç²¾ç¢ºçš„æ”»æ“Šäº‹ä»¶ç›£è½ï¼Œé€™éƒ¨åˆ†éå¸¸å›°é›£ä¸”é«˜é¢¨éšª)
        if Config.AutoBlock then
            -- é€™è£¡é€šå¸¸éœ€è¦HookéŠæˆ²çš„RemoteEventï¼Œåµæ¸¬æ•µäººçš„æ”»æ“Šç™¼é€ï¼Œç„¶å¾Œæ¨¡æ“¬æ ¼æ“‹è¼¸å…¥
            -- ç‚ºäº†é€šç”¨æ€§ï¼Œç›®å‰è…³æœ¬ä¸åŒ…å«æ­¤æ·±åº¦Hookï¼Œåƒ…åšç‚ºä¸€å€‹åŠŸèƒ½ç¤ºæ„
        end
    end
end)


-- æ¸²æŸ“å¾ªç’° (æ¯å¹€åŸ·è¡Œ)
RunService.RenderStepped:Connect(function()
    -- ä¸Šå¸æ¨¡å¼ (God Mode)
    if Config.GodMode and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
        LocalPlayer.Character.Humanoid.Health = LocalPlayer.Character.Humanoid.MaxHealth
    end

    -- é€Ÿåº¦ä¿®æ”¹
    if Config.SpeedEnabled and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
        LocalPlayer.Character.Humanoid.WalkSpeed = Config.Speed
    end

    -- è·³èºä¿®æ”¹
    if Config.JumpEnabled and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
        LocalPlayer.Character.Humanoid.UseJumpPower = true
        LocalPlayer.Character.Humanoid.JumpPower = Config.JumpPower
    end

    -- é£›è¡ŒåŠŸèƒ½
    if Config.FlyEnabled and Config.Flying and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
        local humanoid = LocalPlayer.Character.Humanoid
        local rootPart = LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
        if humanoid and rootPart then
            humanoid.PlatformStand = true 
            rootPart.CFrame = rootPart.CFrame + Camera.CFrame.lookVector * UserInputService:IsKeyDown(Enum.KeyCode.W) * 2
            rootPart.CFrame = rootPart.CFrame + Camera.CFrame.lookVector * -UserInputService:IsKeyDown(Enum.KeyCode.S) * 2
            rootPart.CFrame = rootPart.CFrame + Camera.CFrame.rightVector * UserInputService:IsKeyDown(Enum.KeyCode.D) * 2
            rootPart.CFrame = rootPart.CFrame + Camera.CFrame.rightVector * -UserInputService:IsKeyDown(Enum.KeyCode.A) * 2
            rootPart.CFrame = rootPart.CFrame + Vector3.new(0, 1, 0) * UserInputService:IsKeyDown(Enum.KeyCode.Space) * 2
            rootPart.CFrame = rootPart.CFrame + Vector3.new(0, -1, 0) * UserInputService:IsKeyDown(Enum.KeyCode.LeftControl) * 2
        end
    elseif LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
        if not Config.Flying and LocalPlayer.Character.Humanoid.PlatformStand then
            LocalPlayer.Character.Humanoid.PlatformStand = false
        end
    end

    -- å¤§ç¯„åœæ”»æ“Šåˆ¤å®š (Hitbox Expander)
    if Config.HitboxExpander then
        for _, player in pairs(Players:GetPlayers()) do
            if player ~= LocalPlayer and player.Character then
                local character = player.Character
                for _, part in pairs(character:GetChildren()) do
                    if part:IsA("BasePart") and part.Name ~= "HumanoidRootPart" then
                        if not part:GetAttribute("OriginalSize") then part:SetAttribute("OriginalSize", part.Size) end
                        part.Size = part:GetAttribute("OriginalSize") * Config.HitboxMultiplier
                        part.Transparency = 0.5
                        part.CanCollide = false
                    elseif part:IsA("BasePart") and part.Name == "HumanoidRootPart" then
                        if not part:GetAttribute("OriginalSize") then part:SetAttribute("OriginalSize", part.Size) end
                        part.Size = part:GetAttribute("OriginalSize") * (Config.HitboxMultiplier / 2)
                        part.Transparency = 0.5
                        part.CanCollide = false
                    end
                end
            end
        end
    else
        for _, player in pairs(Players:GetPlayers()) do -- é—œé–‰æ™‚æ¢å¾©å¤§å°
            if player ~= LocalPlayer and player.Character then
                local character = player.Character
                for _, part in pairs(character:GetChildren()) do
                    if part:IsA("BasePart") and part:GetAttribute("OriginalSize") then
                        part.Size = part:GetAttribute("OriginalSize")
                        part.Transparency = 0
                        part.CanCollide = true
                        part:SetAttribute("OriginalSize", nil)
                    end
                end
            end
        end
    end

    -- æ•µäººæ¨™è¨˜ (ESP) / é€£ç·šè¿½è¹¤ (Tracers) / è¡€æ¢ / åç¨± (ç¨è‡ªå‡ç´šé¢¨æ ¼)
    local centerScreen = Vector2.new(Camera.ViewportSize.X / 2, Camera.ViewportSize.Y / 2)
    for _, player in pairs(Players:GetPlayers()) do
        if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
            local char = player.Character
            local root = char.HumanoidRootPart
            local head = char:FindFirstChild("Head")
            local humanoid = char:FindFirstChildOfClass("Humanoid")

            local espColor = Color3.fromRGB(0, 0, 0) -- é»˜èªé¡è‰²
            local outlineColor = Color3.fromRGB(0, 0, 0)
            if Config.ESPStyle == "é™°å½±é‡‘å±¬" then
                espColor = Color3.fromRGB(60, 60, 60)
                outlineColor = Color3.fromRGB(150, 150, 150)
            elseif Config.ESPStyle == "å†°è—æ•¸æ“šæµ" then
                espColor = Color3.fromRGB(0, 100, 200)
                outlineColor = Color3.fromRGB(0, 200, 255)
            elseif Config.ESPStyle == "è¡€ç´…è­¦ç¤º" then
                espColor = Color3.fromRGB(150, 0, 0)
                outlineColor = Color3.fromRGB(255, 0, 0)
            elseif Config.ESPStyle == "æš—å½±è„ˆè¡" then
                espColor = Color3.fromRGB(30, 30, 30)
                outlineColor = Color3.fromRGB(100, 100, 100)
            end

            -- ESP
            if Config.ESP then
                if not char:FindFirstChild("ZN_Highlight") then
                    local hl = Instance.new("Highlight", char)
                    hl.Name = "ZN_Highlight"
                    hl.FillTransparency = 0.4
                    hl.OutlineTransparency = 0.2
                end
                char.ZN_Highlight.FillColor = espColor
                char.ZN_Highlight.OutlineColor = outlineColor
            else
                if char:FindFirstChild("ZN_Highlight") then char.ZN_Highlight:Destroy() end
            end

            -- Tracers (é€£ç·šè¿½è¹¤)
            if Config.Tracers and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
                local myRoot = LocalPlayer.Character.HumanoidRootPart
                if not char:FindFirstChild("ZN_Tracer") then
                    local beam = Instance.new("Beam", char)
                    beam.Name = "ZN_Tracer"
                    beam.Texture = "rbxassetid://628469850" -- æ•¸æ“šæµç´‹ç†
                    beam.Segments = 10
                    beam.Transparency = NumberSequence.new(0.5, 0.8)
                    beam.LightInfluence = 1
                    beam.Width0 = 0.3
                    beam.Width1 = 0.1
                    
                    local p0 = Instance.new("Part", char)
                    p0.Name = "TracerP0"
                    p0.Anchored = true
                    p0.CanCollide = false
                    p0.Transparency = 1
                    p0.Size = Vector3.new(0.1, 0.1, 0.1)

                    local p1 = Instance.new("Part", LocalPlayer.Character)
                    p1.Name = "TracerP1"
                    p1.Anchored = true
                    p1.CanCollide = false
                    p1.Transparency = 1
                    p1.Size = Vector3.new(0.1, 0.1, 0.1)

                    beam.Attachment0 = Instance.new("Attachment", p0)
                    beam.Attachment1 = Instance.new("Attachment", p1)
                end
                char.ZN_Tracer.Color = NumberSequence.new(espColor)
                char.ZN_Tracer.TracerP0.CFrame = CFrame.new(root.Position)
                char.ZN_Tracer.TracerP1.CFrame = CFrame.new(LocalPlayer.Character.HumanoidRootPart.Position)
            else
                if char:FindFirstChild("ZN_Tracer") then char.ZN_Tracer:Destroy() end
            end
            
            -- NameTags / HealthBars
            if head and humanoid then
                local headPos, onScreen = Camera:WorldToViewportPoint(head.Position)
                local screenPos = Vector2.new(headPos.X, headPos.Y)

                -- åç¨±æ¨™ç±¤
                if Config.NameTags then
                    if not head:FindFirstChild("ZN_NameTag") then
                        local tag = Instance.new("BillboardGui", head)
                        tag.Name = "ZN_NameTag"
                        tag.AlwaysOnTop = true
                        tag.Size = UDim2.new(0, 150, 0, 20)
                        tag.StudsOffset = Vector3.new(0, 2, 0)
                        local text = Instance.new("TextLabel", tag)
                        text.Size = UDim2.new(1, 0, 1, 0)
                        text.BackgroundTransparency = 1
                        text.TextColor3 = outlineColor
                        text.TextScaled = true
                        text.TextWrapped = true
                        text.Font = Enum.Font.GothamBold
                        text.TextStrokeTransparency = 0.8
                        text.Text = player.Name
                    else
                        head.ZN_NameTag.Enabled = onScreen
                        head.ZN_NameTag.TextLabel.Text = player.Name
                        head.ZN_NameTag.TextLabel.TextColor3 = outlineColor
                    end
                else
                    if head:FindFirstChild("ZN_NameTag") then head.ZN_NameTag:Destroy() end
                end

                -- è¡€æ¢
                if Config.HealthBars then
                    if not head:FindFirstChild("ZN_HealthBar") then
                        local tag = Instance.new("BillboardGui", head)
                        tag.Name = "ZN_HealthBar"
                        tag.AlwaysOnTop = true
                        tag.Size = UDim2.new(0, 100, 0, 10)
                        tag.StudsOffset = Vector3.new(0, 1.5, 0)
                        local frame = Instance.new("Frame", tag)
                        frame.Size = UDim2.new(1, 0, 1, 0)
                        frame.BackgroundColor3 = Color3.fromRGB(50, 50, 50) -- èƒŒæ™¯
                        local health = Instance.new("Frame", frame)
                        health.Name = "HealthFill"
                        health.Size = UDim2.new(humanoid.Health / humanoid.MaxHealth, 0, 1, 0)
                        health.BackgroundColor3 = Color3.fromRGB(0, 255, 0) -- ç¶ è‰²è¡€æ¢
                    else
                        head.ZN_HealthBar.Enabled = onScreen
                        local healthFill = head.ZN_HealthBar.HealthFill
                        healthFill.Size = UDim2.new(humanoid.Health / humanoid.MaxHealth, 0, 1, 0)
                        healthFill.BackgroundColor3 = Color3.fromRGB(255 * (1 - humanoid.Health / humanoid.MaxHealth), 255 * (humanoid.Health / humanoid.MaxHealth), 0) -- ç´…åˆ°ç¶ æ¼¸è®Š
                    end
                else
                    if head:FindFirstChild("ZN_HealthBar") then head.ZN_HealthBar:Destroy() end
                end
            end
        end
    end
