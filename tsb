--[[
    ÁèçÂ•∂ËÖ≥Êú¨ (ZhenNai Hub) - v18.0 ÂÖ®ËÉΩÁ•ûÁâà (OMNIPOTENT)
    ÂÑ™ÂåñÔºö‰ª£Á¢ºÈáçÊßã (FPS Boost)
    Êñ∞Â¢ûÔºöRGBÂπªÂΩ©„ÄÅÈü≥ÊïàÁ≥ªÁµ±„ÄÅÂãïÊÖãFOV„ÄÅÈò≤ÊéõÊ©ü
]]

--------------------------------------------------------------------------------
-- 1. Á≥ªÁµ±ÂàùÂßãÂåñËàáÊ∏ÖÁêÜ
--------------------------------------------------------------------------------
local CoreGui = game:GetService("CoreGui")
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local Lighting = game:GetService("Lighting")
local UserInputService = game:GetService("UserInputService")
local TeleportService = game:GetService("TeleportService")
local VirtualUser = game:GetService("VirtualUser")

-- Ê∏ÖÁêÜËàäÂØ¶‰æã
for _, gui in pairs(CoreGui:GetChildren()) do
    if gui.Name == "ZhenNai_Mobile_Controls" then gui:Destroy() end
end

local LocalPlayer = Players.LocalPlayer
local Camera = game.Workspace.CurrentCamera

if LocalPlayer.Character then
    for _, x in pairs(LocalPlayer.Character:GetDescendants()) do
        if x.Name:find("ZN_") then x:Destroy() end
    end
end
Lighting:ClearAllChildren()

-- ËºâÂÖ• UI Â∫´
local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

--------------------------------------------------------------------------------
-- 2. ÂÖ®Â±ÄÈÖçÁΩÆ (Config)
--------------------------------------------------------------------------------
local Config = {
    -- Êà∞È¨•
    TargetName = "", 
    CurrentTarget = nil,
    FlingEnabled = false, 
    Hitbox = false, 
    HitboxSize = 25,
    
    -- Ë¶ñË¶∫
    VisualsEnabled = true,
    RGBMode = false,     -- [Êñ∞] ÂπªÂΩ©Ê®°Âºè
    MagicCircle = true,
    EyeTrails = true,
    Wings = true,
    SoulLink = true,
    ScreenFX = true,
    Highlight = true,
    ESP = false,
    
    -- Á≥ªÁµ±
    SoundFX = true,      -- [Êñ∞] Èü≥Êïà
    DynamicFOV = true,   -- [Êñ∞] ÂãïÊÖãË¶ñËßí
    AntiAFK = true,      -- [Êñ∞] Èò≤ÊéõÊ©ü
    
    -- ÁßªÂãï/ÁîüÂ≠ò
    Speed = 100, 
    SpeedEnabled = false, 
    Noclip = false, 
    Invisible = false, 
    AntiVoid = true, 
    VoidHeight = -50,
    SpinBot = false
}

-- [Èü≥Êïà ID Â∫´]
local Sounds = {
    Lock = "rbxassetid://4626639870", -- ÈéñÂÆöÈü≥Êïà
    Engage = "rbxassetid://1645854854", -- ÂïüÂãïËôïÊ±∫
    Kill = "rbxassetid://6342674984" -- ÊìäÊÆ∫Á¢∫Ë™ç
}

--------------------------------------------------------------------------------
-- 3. Ê†∏ÂøÉÁÆ°ÁêÜÂô® (Managers)
--------------------------------------------------------------------------------

-- [Èü≥ÊïàÊí≠ÊîæÂô®]
local function PlaySound(id)
    if not Config.SoundFX then return end
    local s = Instance.new("Sound")
    s.SoundId = id
    s.Volume = 1.5
    s.Parent = game:GetService("SoundService")
    s:Play()
    game.Debris:AddItem(s, 2)
end

-- [ÊêúÂ∞ãÁé©ÂÆ∂]
local function FindPlayer(string)
    if string == "" or string == nil then return nil end
    local found = nil
    for _, p in pairs(Players:GetPlayers()) do
        if p ~= LocalPlayer then
            if string.find(string.lower(p.Name), string.lower(string)) or string.find(string.lower(p.DisplayName), string.lower(string)) then
                found = p; break 
            end
        end
    end
    return found
end

-- [ÁâπÊïàÊõ¥Êñ∞Âô®]
local function UpdateVisuals(char, enable)
    if not char then return end
    local root = char:FindFirstChild("HumanoidRootPart")
    local head = char:FindFirstChild("Head")
    
    -- Ê∏ÖÈô§
    if not enable then
        if Lighting:FindFirstChild("ZN_CC") then Lighting.ZN_CC:Destroy() end
        if Lighting:FindFirstChild("ZN_Bloom") then Lighting.ZN_Bloom:Destroy() end
        for _, v in pairs(char:GetDescendants()) do if v.Name:find("ZN_") then v:Destroy() end end
        return
    end
    
    -- Áï´Èù¢ÊøæÈè°
    if Config.ScreenFX and not Lighting:FindFirstChild("ZN_CC") then
        local cc = Instance.new("ColorCorrectionEffect", Lighting); cc.Name="ZN_CC"; cc.Contrast=0.2; cc.Saturation=-0.1; cc.TintColor=Color3.fromRGB(245,240,255)
        local bl = Instance.new("BloomEffect", Lighting); bl.Name="ZN_Bloom"; bl.Intensity=0.5; bl.Size=25; bl.Threshold=0.8
    end

    -- È°èËâ≤ÈÇèËºØ (RGB vs Âõ∫ÂÆöËâ≤)
    local MainColor = Config.RGBMode and Color3.fromHSV(tick() % 5 / 5, 1, 1) or Color3.fromRGB(120, 0, 255)
    local SubColor = Config.RGBMode and Color3.fromHSV((tick() + 2) % 5 / 5, 1, 1) or Color3.fromRGB(0, 255, 255)

    -- È≠îÊ≥ïÈô£
    if Config.MagicCircle and root then
        if not root:FindFirstChild("ZN_Circle") then
            local att = Instance.new("Attachment", root); att.Name = "ZN_CircleAtt"; att.Position = Vector3.new(0, -2.8, 0); att.Orientation = Vector3.new(90, 0, 0)
            local p = Instance.new("ParticleEmitter", att); p.Name = "ZN_Circle"
            p.Texture = "rbxassetid://244221613"; p.Size = NumberSequence.new(18)
            p.Rate = 1; p.Lifetime = NumberRange.new(999); p.Speed = NumberRange.new(0)
            p.Rotation = NumberRange.new(0, 360); p.RotSpeed = NumberRange.new(20)
            p.Transparency = NumberSequence.new(0.2); p.LockedToPart = true; p:Emit(1)
        end
        if root:FindFirstChild("ZN_Circle") then root.ZN_Circle.Color = ColorSequence.new(MainColor) end
    end

    -- ÁøÖËÜÄ
    if Config.Wings and root then
        if not root:FindFirstChild("ZN_Wings") then
            local att = Instance.new("Attachment", root); att.Position = Vector3.new(0, 1.5, 0.5)
            local p = Instance.new("ParticleEmitter", att); p.Name = "ZN_Wings"
            p.Texture = "rbxassetid://243660364"; p.Rate = 100; p.Lifetime = NumberRange.new(0.5, 1)
            p.Speed = NumberRange.new(5); p.SpreadAngle = Vector2.new(40, 10); p.Acceleration = Vector3.new(0, 5, 0)
            p.Size = NumberSequence.new({NumberSequenceKeypoint.new(0, 0.5), NumberSequenceKeypoint.new(1, 5)})
        end
        if root:FindFirstChild("ZN_Wings") then 
            root.ZN_Wings.Color = ColorSequence.new({ColorSequenceKeypoint.new(0, Color3.new(0,0,0)), ColorSequenceKeypoint.new(1, MainColor)}) 
        end
    end
    
    -- Ëº™ÂªìÂÖâ
    if Config.Highlight then
        if not char:FindFirstChild("ZN_HL") then
            local hl = Instance.new("Highlight", char); hl.Name="ZN_HL"; hl.FillTransparency=0.4
        end
        if char:FindFirstChild("ZN_HL") then
            char.ZN_HL.FillColor = Color3.fromRGB(10,0,20)
            char.ZN_HL.OutlineColor = MainColor
        end
    end

    -- ÁúºÁùõÊãñÂ∞æ (ÈúÄÊØèÂπÄÊõ¥Êñ∞È°èËâ≤)
    if Config.EyeTrails and head then
        -- ÊãñÂ∞æÂâµÂª∫ÈÇèËºØÁï•ÂæÆÁ∞°ÂåñÔºåÈáçÈªûÂú®È°èËâ≤Êõ¥Êñ∞
        local t = head:FindFirstChild("ZN_EyeTrail")
        if not t then
            -- ÂâµÂª∫‰ª£Á¢º... (Á∞°Âåñ‰ª•ÂÑ™ÂåñÁØáÂπÖ)
            local attL = Instance.new("Attachment", head); attL.Position = Vector3.new(-0.15,0.2,-0.15)
            local tL = Instance.new("Trail", head); tL.Name = "ZN_EyeTrail"; tL.Attachment0 = attL; tL.Attachment1 = head:FindFirstChild("FaceCenterAttachment") or attL
            tL.Lifetime = 0.4; tL.WidthScale = NumberSequence.new(0.1,0)
            local attR = Instance.new("Attachment", head); attR.Position = Vector3.new(0.15,0.2,-0.15)
            local tR = Instance.new("Trail", head); tR.Name = "ZN_EyeTrail"; tR.Attachment0 = attR; tR.Attachment1 = head:FindFirstChild("FaceCenterAttachment") or attR
            tR.Lifetime = 0.4; tR.WidthScale = NumberSequence.new(0.1,0)
        end
        for _, tr in pairs(head:GetChildren()) do
            if tr.Name == "ZN_EyeTrail" then tr.Color = ColorSequence.new({ColorSequenceKeypoint.new(0, SubColor), ColorSequenceKeypoint.new(1, MainColor)}) end
        end
    end
end

-- [Áâ©ÁêÜÁî©È£õ]
local function StartFling()
    if not Config.CurrentTarget then Rayfield:Notify({Title="ÈåØË™§",Content="Êú™ÈéñÂÆö",Duration=1}) return end
    local Char = LocalPlayer.Character; if not Char or not Char:FindFirstChild("HumanoidRootPart") then return end
    local Root = Char.HumanoidRootPart
    
    -- Áâ©ÁêÜÊ≥®ÂÖ•
    for _, x in pairs(Root:GetChildren()) do if x.Name:find("ZN_Phys") then x:Destroy() end end
    local BAV = Instance.new("BodyAngularVelocity", Root); BAV.Name = "ZN_Phys_Spin"; BAV.MaxTorque = Vector3.new(9e9,9e9,9e9); BAV.AngularVelocity = Vector3.new(0,100000,0)
    local BV = Instance.new("BodyVelocity", Root); BV.Name = "ZN_Phys_Lift"; BV.MaxForce = Vector3.new(9e9,9e9,9e9); BV.Velocity = Vector3.new(0,0,0)
    
    Config.Noclip = true
    PlaySound(Sounds.Engage)
    
    -- ÂãïÊÖã FOV
    if Config.DynamicFOV then TweenService:Create(Camera, TweenInfo.new(0.5), {FieldOfView = 100}):Play() end

    -- ÁàÜÁôºÁâπÊïà
    local p = Instance.new("ParticleEmitter", Root); p.Name = "ZN_Burst"; p.Texture = "rbxassetid://243660364"
    p.Color = ColorSequence.new(Color3.fromRGB(255,50,50)); p.Size = NumberSequence.new({NumberSequenceKeypoint.new(0,1),NumberSequenceKeypoint.new(1,25)})
    p.Transparency = NumberSequence.new({NumberSequenceKeypoint.new(0,0.2),NumberSequenceKeypoint.new(1,1)}); p.Lifetime = NumberRange.new(0.5); p.Rate = 0; p.Speed = NumberRange.new(0)
    p:Emit(30); game.Debris:AddItem(p, 1)
end

local function StopFling()
    local Char = LocalPlayer.Character; if not Char or not Char:FindFirstChild("HumanoidRootPart") then return end
    for _, x in pairs(Char.HumanoidRootPart:GetChildren()) do if x.Name:find("ZN_Phys") then x:Destroy() end end
    Char.HumanoidRootPart.Velocity = Vector3.new(0,0,0); Char.HumanoidRootPart.RotVelocity = Vector3.new(0,0,0)
    
    if Config.DynamicFOV then TweenService:Create(Camera, TweenInfo.new(0.5), {FieldOfView = 70}):Play() end
end

-- [Â∑•ÂÖ∑]
local function GiveTPTool()
    if LocalPlayer.Backpack:FindFirstChild("ÂΩ±‰πãÁû¨Áßª") then return end
    local tool = Instance.new("Tool", LocalPlayer.Backpack); tool.Name = "ÂΩ±‰πãÁû¨Áßª"; tool.RequiresHandle = false
    tool.Activated:Connect(function()
        local Mouse = LocalPlayer:GetMouse()
        if Mouse and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
            LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(Mouse.Hit.Position + Vector3.new(0,3,0))
            PlaySound("rbxassetid://260433746") -- Áû¨ÁßªÈü≥Êïà
        end
    end)
end

--------------------------------------------------------------------------------
-- 4. UI ‰ªãÈù¢
--------------------------------------------------------------------------------
local Window = Rayfield:CreateWindow({Name = "ÁèçÂ•∂ËÖ≥Êú¨ | SYSTEM: OMNIPOTENT v18", LoadingTitle = "ËºâÂÖ•ÂÖ®ËÉΩÁ•ûÁ≥ªÁµ±...", ConfigurationSaving = { Enabled = false }, KeySystem = false})

local CombatTab = Window:CreateTab("üíÄ ÊØÄÊªÖ", 4483362458)
local VisualTab = Window:CreateTab("üëë Ë¶ñË¶∫", 4483362458)
local MoveTab = Window:CreateTab("üõ°Ô∏è ÁîüÂ≠ò", 4483362458)

-- Mobile UI
local ScreenGui = Instance.new("ScreenGui", CoreGui); ScreenGui.Name="ZhenNai_Mobile_Controls"
local MenuBtn = Instance.new("TextButton", ScreenGui); MenuBtn.Size=UDim2.new(0,100,0,40); MenuBtn.Position=UDim2.new(0,10,0,10); MenuBtn.BackgroundColor3=Color3.fromRGB(0,200,100); MenuBtn.Text="ÈÅ∏ÂñÆ"; MenuBtn.TextColor3=Color3.new(1,1,1); Instance.new("UICorner", MenuBtn).CornerRadius=UDim.new(0,8)
local HuntBtn = Instance.new("TextButton", ScreenGui); HuntBtn.Size=UDim2.new(0,85,0,85); HuntBtn.Position=UDim2.new(0.8,0,0.45,0); HuntBtn.BackgroundColor3=Color3.fromRGB(0,0,0); HuntBtn.BackgroundTransparency=0.3; HuntBtn.Text="ÊØÄÊªÖ"; HuntBtn.TextColor3=Color3.fromRGB(255,0,0); HuntBtn.Font=Enum.Font.GothamBlack; HuntBtn.TextSize=20; Instance.new("UICorner", HuntBtn).CornerRadius=UDim.new(1,0); Instance.new("UIStroke", HuntBtn).Color=Color3.fromRGB(255,0,0); Instance.new("UIStroke", HuntBtn).Thickness=2.5
local InvisBtn = Instance.new("TextButton", ScreenGui); InvisBtn.Size=UDim2.new(0,85,0,85); InvisBtn.Position=UDim2.new(0.8,0,0.60,0); InvisBtn.BackgroundColor3=Color3.fromRGB(0,0,0); InvisBtn.BackgroundTransparency=0.3; InvisBtn.Text="Èö±ÂΩ¢"; InvisBtn.TextColor3=Color3.fromRGB(150,150,255); InvisBtn.Font=Enum.Font.GothamBlack; InvisBtn.TextSize=20; Instance.new("UICorner", InvisBtn).CornerRadius=UDim.new(1,0); Instance.new("UIStroke", InvisBtn).Color=Color3.fromRGB(150,150,255); Instance.new("UIStroke", InvisBtn).Thickness=2.5

local isMenuOpen = true
MenuBtn.MouseButton1Click:Connect(function() isMenuOpen=not isMenuOpen; local Found=false; for _, gui in pairs(CoreGui:GetChildren()) do if gui:IsA("ScreenGui") then for _, d in pairs(gui:GetDescendants()) do if d:IsA("TextLabel") and string.find(d.Text, "OMNIPOTENT") then gui.Enabled=isMenuOpen; Found=true; break end end end if Found then break end end end)

-- UI Items
CombatTab:CreateInput({Name="ÁõÆÊ®ôÂêçÁ®±", PlaceholderText="ID/Name", Callback=function(Text) Config.TargetName=Text; local t=FindPlayer(Text); if t then Config.CurrentTarget=t; Rayfield:Notify({Title="ÈéñÂÆö",Content=t.Name,Duration=2}); PlaySound(Sounds.Lock) end end})
CombatTab:CreateToggle({Name="ÂïüÂãïÔºöËôïÊ±∫ (Fling)", CurrentValue=false, Callback=function(v) Config.FlingEnabled=v; if v then StartFling() else StopFling() end end})
CombatTab:CreateToggle({Name="Êì¥Â§ßÂà§ÂÆö (Hitbox)", CurrentValue=false, Callback=function(v) Config.Hitbox=v end})
CombatTab:CreateSlider({Name="Âà§ÂÆöÂ§ßÂ∞è", Range={5,50}, Increment=1, CurrentValue=25, Callback=function(v) Config.HitboxSize=v end})

VisualTab:CreateToggle({Name="ÁâπÊïàÁ∏ΩÈñãÈóú", CurrentValue=true, Callback=function(v) Config.VisualsEnabled=v; UpdateVisuals(LocalPlayer.Character, v) end})
VisualTab:CreateToggle({Name="üåà RGB ÂπªÂΩ©Ê®°Âºè", CurrentValue=false, Callback=function(v) Config.RGBMode=v end})
VisualTab:CreateSection("ÁâπÊïàÁ¥∞È†Ö")
VisualTab:CreateToggle({Name="È≠îÊ≥ïÈô£", CurrentValue=true, Callback=function(v) Config.MagicCircle=v end})
VisualTab:CreateToggle({Name="ÁúºÈÉ®ÂÖâÊµÅ", CurrentValue=true, Callback=function(v) Config.EyeTrails=v end})
VisualTab:CreateToggle({Name="ÊöóÂΩ±‰πãÁøº", CurrentValue=true, Callback=function(v) Config.Wings=v end})
VisualTab:CreateToggle({Name="ÈùàÈ≠ÇÈèàÊé•", CurrentValue=true, Callback=function(v) Config.SoulLink=v end})
VisualTab:CreateToggle({Name="Áï´Èù¢ÊøæÈè°", CurrentValue=true, Callback=function(v) Config.ScreenFX=v; if not v and Lighting:FindFirstChild("ZN_CC") then Lighting.ZN_CC:Destroy() end end})
VisualTab:CreateToggle({Name="ESP", CurrentValue=false, Callback=function(v) Config.ESP=v end})

MoveTab:CreateButton({Name="È†òÂèñÔºöÂΩ±‰πãÁû¨Áßª (Tool)", Callback=function() GiveTPTool(); Rayfield:Notify({Title="Á≥ªÁµ±",Content="Â∑≤ÁôºÈÄÅ",Duration=1}) end})
MoveTab:CreateToggle({Name="Èò≤ËôõÁ©∫ (Anti-Void)", CurrentValue=true, Callback=function(v) Config.AntiVoid=v end})
MoveTab:CreateToggle({Name="ÂÆåÂÖ®Èö±ÂΩ¢", CurrentValue=false, Callback=function(v) Config.Invisible=v; if not v and LocalPlayer.Character then LocalPlayer.Character.Humanoid.DisplayDistanceType=Enum.HumanoidDisplayDistanceType.Viewer; for _,p in pairs(LocalPlayer.Character:GetDescendants()) do if (p:IsA("BasePart") or p:IsA("Decal")) and p.Name~="HumanoidRootPart" then p.Transparency=0 end end end end})
MoveTab:CreateSlider({Name="ÈÄüÂ∫¶", Range={16,500}, Increment=5, CurrentValue=100, Callback=function(v) Config.Speed=v end})
MoveTab:CreateToggle({Name="ÂïüÁî®ÈÄüÂ∫¶", CurrentValue=false, Callback=function(v) Config.SpeedEnabled=v end})
MoveTab:CreateToggle({Name="Á©øÁâÜ (Noclip)", CurrentValue=false, Callback=function(v) Config.Noclip=v end})
MoveTab:CreateSection("Á≥ªÁµ±Ë®≠ÂÆö")
MoveTab:CreateToggle({Name="Èü≥ÊïàÁ≥ªÁµ±", CurrentValue=true, Callback=function(v) Config.SoundFX=v end})
MoveTab:CreateToggle({Name="ÂãïÊÖãË¶ñËßí", CurrentValue=true, Callback=function(v) Config.DynamicFOV=v end})

--------------------------------------------------------------------------------
-- 5. Ê†∏ÂøÉÂæ™Áí∞ (The Engine)
--------------------------------------------------------------------------------
HuntBtn.MouseButton1Click:Connect(function() Config.FlingEnabled = not Config.FlingEnabled; if Config.FlingEnabled then HuntBtn.Text="ÂÅúÊ≠¢"; StartFling() else HuntBtn.Text="ÊØÄÊªÖ"; StopFling() end end)
InvisBtn.MouseButton1Click:Connect(function() Config.Invisible = not Config.Invisible; if Config.Invisible then InvisBtn.Text="ÁèæË∫´" else InvisBtn.Text="Èö±ÂΩ¢" end end)

-- [RenderStepped] Ë¶ñË¶∫Ëàá CFrame ËôïÁêÜ
RunService.RenderStepped:Connect(function()
    local Char = LocalPlayer.Character; if not Char or not Char:FindFirstChild("HumanoidRootPart") then return end
    
    -- RGB È©ÖÂãïËàáÁâπÊïàÊõ¥Êñ∞
    if Config.VisualsEnabled then UpdateVisuals(Char, true) end
    
    -- Fling ÈÇèËºØ
    if Config.FlingEnabled and Config.CurrentTarget then
        local TChar = Config.CurrentTarget.Character
        if TChar and TChar:FindFirstChild("HumanoidRootPart") and TChar:FindFirstChild("Humanoid") and TChar.Humanoid.Health > 0 then
            local jitter = Vector3.new(math.random(-15,15)/10, -1, math.random(-15,15)/10)
            Char.HumanoidRootPart.CFrame = TChar.HumanoidRootPart.CFrame * CFrame.new(jitter)
            Char.HumanoidRootPart.Velocity = Vector3.new(0,0,0)
            
            -- ÈùàÈ≠ÇÈèàÊé•
            if Config.SoulLink and Config.VisualsEnabled then
                local beam = Char.HumanoidRootPart:FindFirstChild("ZN_Beam")
                if not beam then
                    local att0 = Instance.new("Attachment", Char.HumanoidRootPart); att0.Name = "ZN_BeamAtt"
                    local b = Instance.new("Beam", Char.HumanoidRootPart); b.Name = "ZN_Beam"; b.Attachment0 = att0
                    b.Texture="rbxassetid://446111271"; b.TextureSpeed=3; b.Width0=0.5; b.Width1=0.5; b.FaceCamera=true
                    b.Color = Config.RGBMode and ColorSequence.new(Color3.fromHSV(tick()%5/5,1,1)) or ColorSequence.new(Color3.fromRGB(255,0,0))
                    beam = b
                end
                beam.Attachment1 = TChar.HumanoidRootPart:FindFirstChild("RootAttachment") or TChar.HumanoidRootPart:FindFirstChild("BodyFrontAttachment")
            end
        else
            Config.FlingEnabled=false; StopFling(); PlaySound(Sounds.Kill); Rayfield:Notify({Title="ÁõÆÊ®ôÊ∏ÖÈô§",Content="ÁçµÊÆ∫ÂÆåÊàê",Duration=2})
        end
    else
        if Char.HumanoidRootPart:FindFirstChild("ZN_Beam") then Char.HumanoidRootPart.ZN_Beam:Destroy() end
    end
    
    -- Èö±ÂΩ¢
    if Config.Invisible then
        if Char:FindFirstChild("Humanoid") then Char.Humanoid.DisplayDistanceType=Enum.HumanoidDisplayDistanceType.None end
        for _, v in pairs(Char:GetDescendants()) do if v:IsA("BasePart") and v.Name~="HumanoidRootPart" then v.Transparency=1; v.CanCollide=false end; if v:IsA("Decal") then v.Transparency=1 end end
    end
    
    -- ESP
    if Config.ESP then
        for _, p in pairs(Players:GetPlayers()) do
            if p ~= LocalPlayer and p.Character and p.Character:FindFirstChild("Head") and not p.Character:FindFirstChild("ZN_ESP") then
                local bb = Instance.new("BillboardGui", p.Character.Head); bb.Name="ZN_ESP"; bb.Size=UDim2.new(0,100,0,50); bb.AlwaysOnTop=true
                local t = Instance.new("TextLabel", bb); t.Size=UDim2.new(1,0,1,0); t.BackgroundTransparency=1; t.TextColor3=Color3.new(1,0,0); t.Text=p.Name
            end
        end
    else
        for _, p in pairs(Players:GetPlayers()) do if p.Character and p.Character:FindFirstChild("ZN_ESP") then p.Character.ZN_ESP:Destroy() end end
    end
end)

-- [Heartbeat] Áâ©ÁêÜËôïÁêÜ
RunService.Heartbeat:Connect(function()
    local Char = LocalPlayer.Character; if not Char then return end
    local Humanoid = Char:FindFirstChild("Humanoid")
    if Config.SpeedEnabled and Humanoid then Humanoid.WalkSpeed = Config.Speed end
    if Config.Noclip or Config.FlingEnabled then for _, part in pairs(Char:GetChildren()) do if part:IsA("BasePart") then part.CanCollide=false end end end
    if Config.SpinBot and Char:FindFirstChild("HumanoidRootPart") then Char.HumanoidRootPart.CFrame = Char.HumanoidRootPart.CFrame * CFrame.Angles(0, math.rad(50), 0) end
    
    -- Anti-Void
    if Config.AntiVoid and Char.HumanoidRootPart and Char.HumanoidRootPart.Position.Y < Config.VoidHeight then
        Char.HumanoidRootPart.CFrame = CFrame.new(Char.HumanoidRootPart.Position.X, 50, Char.HumanoidRootPart.Position.Z)
        Char.HumanoidRootPart.Velocity = Vector3.new(0,0,0); Config.FlingEnabled=false; StopFling()
    end
    
    -- Hitbox
    if Config.Hitbox then
        for _, p in pairs(Players:GetPlayers()) do
            if p ~= LocalPlayer and p.Character and p.Character:FindFirstChild("Head") then
                p.Character.Head.Size = Vector3.new(Config.HitboxSize, Config.HitboxSize, Config.HitboxSize)
                p.Character.Head.Transparency = 0.6; p.Character.Head.CanCollide = false
            end
        end
    end
end)

-- Anti-AFK
LocalPlayer.Idled:Connect(function()
    VirtualUser:Button2Down(Vector2.new(0,0),workspace.CurrentCamera.CFrame)
    VirtualUser:Button2Up(Vector2.new(0,0),workspace.CurrentCamera.CFrame)
end)

LocalPlayer.CharacterAdded:Connect(function(newChar) task.wait(1); if Config.VisualsEnabled then UpdateVisuals(newChar, true) end end)
Rayfield:Notify({Title = "SYSTEM: OMNIPOTENT", Content = "ÂÖ®ËÉΩÁ•û v18 ÂïüÂãï„ÄÇRGBËàáÈü≥ÊïàÁ≥ªÁµ±Â∑≤Â∞±Á∑í„ÄÇ", Duration = 5})
