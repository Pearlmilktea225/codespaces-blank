--[[
    çå¥¶è…³æœ¬ (ZhenNai Hub) - v15.0 æ°¸æ†å›ç‹ç‰ˆ (ETERNAL)
    æ–°å¢ï¼šçµ•å°é˜²è™›ç©º (Anti-Void)
    æ–°å¢ï¼šæš—å½±ä¹‹ç¿¼ (Wings) + è™•æ±ºçˆ†ç™¼ç‰¹æ•ˆ
    æ ¸å¿ƒï¼šç›¸ä½ç©¿é€ç”©é£› (Phase Fling)
]]

-- 1. æ¸…ç†èˆŠå¯¦ä¾‹
for _, gui in pairs(game.CoreGui:GetChildren()) do
    if gui.Name == "ZhenNai_Mobile_Controls" then gui:Destroy() end
end
local LP = game:GetService("Players").LocalPlayer
if LP and LP.Character then
    for _, x in pairs(LP.Character:GetDescendants()) do
        if x.Name:find("ZN_") then x:Destroy() end
    end
end

local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local Workspace = game:GetService("Workspace")
local LocalPlayer = Players.LocalPlayer

-- [é…ç½®]
local Config = {
    -- æˆ°é¬¥
    TargetName = "", CurrentTarget = nil,
    FlingEnabled = false, 
    Hitbox = false, HitboxSize = 20,
    
    -- è¦–è¦º (ç‰¹æ•ˆåŠ å¼·)
    VisualsEnabled = true, 
    Aura = true,        -- éœ¸æ°£
    Highlight = true,   -- è¼ªå»“
    Lightning = true,   -- é›·é›»
    Wings = true,       -- [æ–°å¢] ç¿…è†€
    ESP = false,
    
    -- ç§»å‹•/ç”Ÿå­˜
    Speed = 100, SpeedEnabled = false, Noclip = false, Invisible = false,
    AntiVoid = true,    -- [æ–°å¢] é˜²è™›ç©º
    VoidHeight = -50,   -- æ‰è½åˆ¤å®šé«˜åº¦
    
    -- å…¶ä»–
    SpinBot = false
}

--------------------------------------------------------------------------------
-- 0. æ ¸å¿ƒå‡½æ•¸
--------------------------------------------------------------------------------
local function FindPlayer(string)
    if string == "" or string == nil then return nil end
    local found = nil
    for _, p in pairs(Players:GetPlayers()) do
        if p ~= LocalPlayer then
            if string.find(string.lower(p.Name), string.lower(string)) or 
               string.find(string.lower(p.DisplayName), string.lower(string)) then
                found = p
                break 
            end
        end
    end
    return found
end

-- [ç‰¹æ•ˆç®¡ç†å™¨]
local function SpawnBurst(char)
    -- è™•æ±ºå•Ÿå‹•æ™‚çš„çˆ†ç™¼ç‰¹æ•ˆ
    if not char or not char:FindFirstChild("HumanoidRootPart") then return end
    local root = char.HumanoidRootPart
    local p = Instance.new("ParticleEmitter", root)
    p.Name = "ZN_Burst"
    p.Texture = "rbxassetid://243660364" -- ç…™éœ§åœˆ
    p.Color = ColorSequence.new(Color3.fromRGB(255, 0, 0))
    p.Size = NumberSequence.new({NumberSequenceKeypoint.new(0, 1), NumberSequenceKeypoint.new(1, 15)}) -- å¾å°è®Šå¤§
    p.Transparency = NumberSequence.new({NumberSequenceKeypoint.new(0, 0.2), NumberSequenceKeypoint.new(1, 1)})
    p.Lifetime = NumberRange.new(0.5)
    p.Rate = 0
    p.Speed = NumberRange.new(0)
    p.Rotation = NumberRange.new(0, 360)
    p.RotSpeed = NumberRange.new(100)
    p.ZOffset = 1
    p:Emit(20) -- ç¬é–“ç™¼å°„
    game.Debris:AddItem(p, 1)
end

local function UpdateFX(char, enable)
    if not char then return end
    local root = char:FindFirstChild("HumanoidRootPart")
    
    if not enable then
        for _, v in pairs(char:GetDescendants()) do if v.Name:find("ZN_") then v:Destroy() end end
        return
    end
    
    -- 1. è¼ªå»“ (Highlight)
    if Config.Highlight and not char:FindFirstChild("ZN_HL") then
        local hl = Instance.new("Highlight", char); hl.Name = "ZN_HL"; hl.FillColor = Color3.new(0,0,0); hl.OutlineColor = Color3.fromRGB(200,0,255); hl.FillTransparency = 0.5
    end
    
    -- 2. éœ¸æ°£ (Aura)
    if Config.Aura and root and not root:FindFirstChild("ZN_Aura") then
        local p = Instance.new("ParticleEmitter", root); p.Name = "ZN_Aura"; p.Texture = "rbxassetid://243660364"; p.Rate = 100; p.ZOffset = -1
        p.Color = ColorSequence.new({ColorSequenceKeypoint.new(0,Color3.fromRGB(20,0,50)), ColorSequenceKeypoint.new(1,Color3.fromRGB(150,0,255))})
        p.Size = NumberSequence.new({NumberSequenceKeypoint.new(0, 5), NumberSequenceKeypoint.new(1, 0)})
    end
    
    -- 3. é›·é›» (Lightning)
    if Config.Lightning and root and not root:FindFirstChild("ZN_Bolt") then
        local p = Instance.new("ParticleEmitter", root); p.Name = "ZN_Bolt"; p.Texture = "rbxassetid://242205514"; p.Rate = 50
        p.Rotation = NumberRange.new(0,360); p.RotSpeed = NumberRange.new(500); p.Color = ColorSequence.new(Color3.fromRGB(0,255,255))
    end
    
    -- 4. [æ–°å¢] æš—å½±ä¹‹ç¿¼ (Wings)
    if Config.Wings and root and not root:FindFirstChild("ZN_Wings") then
        local att = Instance.new("Attachment", root); att.Name = "ZN_WingsAtt"; att.Position = Vector3.new(0, 2, 0.5)
        local p = Instance.new("ParticleEmitter", att); p.Name = "ZN_Wings"
        p.Texture = "rbxassetid://243660364"
        p.Rate = 100
        p.Lifetime = NumberRange.new(0.5, 1)
        p.Speed = NumberRange.new(5)
        p.SpreadAngle = Vector2.new(20, 20)
        p.Acceleration = Vector3.new(0, 10, 0) -- å‘ä¸Šé£„
        p.Color = ColorSequence.new(Color3.fromRGB(0, 0, 0)) -- ç´”é»‘
        p.Size = NumberSequence.new({NumberSequenceKeypoint.new(0, 1), NumberSequenceKeypoint.new(1, 5)})
        p.LockedToPart = false
    end
end

-- [ç‰©ç†ç”©é£›æ ¸å¿ƒ]
local function StartFling()
    if not Config.CurrentTarget then Rayfield:Notify({Title="éŒ¯èª¤", Content="æœªé–å®šç›®æ¨™", Duration=1}) return end
    local Char = LocalPlayer.Character
    if not Char or not Char:FindFirstChild("HumanoidRootPart") then return end
    local Root = Char.HumanoidRootPart
    
    -- æ¸…ç†
    for _, x in pairs(Root:GetChildren()) do if x.Name:find("ZN_Phys") then x:Destroy() end end
    
    -- è«¸ç¥é»ƒæ˜åŠ›å ´
    local BAV = Instance.new("BodyAngularVelocity", Root); BAV.Name = "ZN_Phys_Spin"
    BAV.MaxTorque = Vector3.new(9e9, 9e9, 9e9); BAV.AngularVelocity = Vector3.new(0, 100000, 0)
    
    local BV = Instance.new("BodyVelocity", Root); BV.Name = "ZN_Phys_Lift"
    BV.MaxForce = Vector3.new(9e9, 9e9, 9e9); BV.Velocity = Vector3.new(0, 0, 0)
    
    Config.Noclip = true -- å¼·åˆ¶é–‹ç©¿ç‰†
    SpawnBurst(Char) -- æ’­æ”¾çˆ†ç™¼ç‰¹æ•ˆ
    Rayfield:Notify({Title="ETERNAL", Content="è™•æ±ºé–‹å§‹", Duration=1})
end

local function StopFling()
    local Char = LocalPlayer.Character
    if not Char or not Char:FindFirstChild("HumanoidRootPart") then return end
    for _, x in pairs(Char.HumanoidRootPart:GetChildren()) do if x.Name:find("ZN_Phys") then x:Destroy() end end
    Char.HumanoidRootPart.Velocity = Vector3.new(0,0,0)
    Char.HumanoidRootPart.RotVelocity = Vector3.new(0,0,0)
end

--------------------------------------------------------------------------------
-- 1. UI ä»‹é¢
--------------------------------------------------------------------------------
local Window = Rayfield:CreateWindow({
    Name = "çå¥¶è…³æœ¬ | SYSTEM: ETERNAL v15",
    LoadingTitle = "ç³»çµ±å‡ç´šï¼šæ°¸æ†å›ç‹",
    LoadingSubtitle = "é˜²è™›ç©º + è¦–è¦ºé‡è£½",
    ConfigurationSaving = { Enabled = false },
    KeySystem = false, 
})

local CombatTab = Window:CreateTab("ğŸ’€ è™•æ±º", 4483362458)
local VisualTab = Window:CreateTab("âœ¨ ç‰¹æ•ˆ", 4483362458)
local MoveTab = Window:CreateTab("ğŸ›¡ï¸ ç”Ÿå­˜", 4483362458)

-- [æ‰‹æ©Ÿæ§åˆ¶é …]
local ScreenGui = Instance.new("ScreenGui", game.CoreGui)
ScreenGui.Name = "ZhenNai_Mobile_Controls"
local MenuBtn = Instance.new("TextButton", ScreenGui); MenuBtn.Size=UDim2.new(0,100,0,40); MenuBtn.Position=UDim2.new(0,10,0,10); MenuBtn.BackgroundColor3=Color3.fromRGB(0,200,100); MenuBtn.Text="é¸å–®"; MenuBtn.TextColor3=Color3.new(1,1,1)
Instance.new("UICorner", MenuBtn).CornerRadius=UDim.new(0,8)
local HuntBtn = Instance.new("TextButton", ScreenGui); HuntBtn.Size=UDim2.new(0,85,0,85); HuntBtn.Position=UDim2.new(0.8,0,0.45,0); HuntBtn.BackgroundColor3=Color3.fromRGB(0,0,0); HuntBtn.BackgroundTransparency=0.3; HuntBtn.Text="æ¯€æ»…"; HuntBtn.TextColor3=Color3.fromRGB(255,0,0); HuntBtn.TextSize=20; HuntBtn.Font=Enum.Font.GothamBlack
Instance.new("UICorner", HuntBtn).CornerRadius=UDim.new(1,0); Instance.new("UIStroke", HuntBtn).Color=Color3.fromRGB(255,0,0); Instance.new("UIStroke", HuntBtn).Thickness=2.5
local InvisBtn = Instance.new("TextButton", ScreenGui); InvisBtn.Size=UDim2.new(0,85,0,85); InvisBtn.Position=UDim2.new(0.8,0,0.60,0); InvisBtn.BackgroundColor3=Color3.fromRGB(0,0,0); InvisBtn.BackgroundTransparency=0.3; InvisBtn.Text="éš±å½¢"; InvisBtn.TextColor3=Color3.fromRGB(150,150,255); InvisBtn.TextSize=20; InvisBtn.Font=Enum.Font.GothamBlack
Instance.new("UICorner", InvisBtn).CornerRadius=UDim.new(1,0); Instance.new("UIStroke", InvisBtn).Color=Color3.fromRGB(150,150,255); Instance.new("UIStroke", InvisBtn).Thickness=2.5

local isMenuOpen = true
MenuBtn.MouseButton1Click:Connect(function()
    isMenuOpen = not isMenuOpen
    local Found = false
    for _, gui in pairs(game.CoreGui:GetChildren()) do
        if gui:IsA("ScreenGui") then
            for _, descendant in pairs(gui:GetDescendants()) do
                if descendant:IsA("TextLabel") and string.find(descendant.Text, "ETERNAL") then gui.Enabled=isMenuOpen; Found=true; break end
            end
        end
        if Found then break end
    end
end)

--------------------------------------------------------------------------------
-- 2. åŠŸèƒ½é…ç½®
--------------------------------------------------------------------------------
-- æˆ°é¬¥
CombatTab:CreateInput({Name = "ç›®æ¨™åç¨±", PlaceholderText = "ID/Name", Callback = function(Text)
    Config.TargetName = Text; local t = FindPlayer(Text)
    if t then Config.CurrentTarget = t; Rayfield:Notify({Title="é–å®š", Content=t.Name, Duration=2}) end
end})
CombatTab:CreateToggle({Name = "å•Ÿå‹•ï¼šè™•æ±º (Fling)", CurrentValue = false, Callback = function(v) Config.FlingEnabled = v; if v then StartFling() else StopFling() end end})
CombatTab:CreateToggle({Name = "æ“´å¤§åˆ¤å®š (Hitbox)", CurrentValue = false, Callback = function(v) Config.Hitbox = v end})
CombatTab:CreateSlider({Name = "åˆ¤å®šå¤§å°", Range = {5, 50}, Increment = 1, CurrentValue = 20, Callback = function(v) Config.HitboxSize = v end})

-- ç”Ÿå­˜/ç§»å‹•
MoveTab:CreateSection("å®‰å…¨é˜²è­·")
MoveTab:CreateToggle({Name = "çµ•å°é˜²è™›ç©º (Anti-Void)", CurrentValue = true, Callback = function(v) Config.AntiVoid = v end})
MoveTab:CreateSlider({Name = "è™›ç©ºåˆ¤å®šé«˜åº¦ (Yè»¸)", Range = {-200, -10}, Increment = 10, CurrentValue = -50, Callback = function(v) Config.VoidHeight = v end})

MoveTab:CreateSection("å±¬æ€§")
MoveTab:CreateSlider({Name = "é€Ÿåº¦ (Speed)", Range = {16, 500}, Increment = 5, CurrentValue = 100, Callback = function(v) Config.Speed = v end})
MoveTab:CreateToggle({Name = "å•Ÿç”¨é€Ÿåº¦", CurrentValue = false, Callback = function(v) Config.SpeedEnabled = v end})
MoveTab:CreateToggle({Name = "ç©¿ç‰† (Noclip)", CurrentValue = false, Callback = function(v) Config.Noclip = v end})

-- è¦–è¦º
VisualTab:CreateToggle({Name = "ç‰¹æ•ˆç¸½é–‹é—œ", CurrentValue = true, Callback = function(v) Config.VisualsEnabled = v; UpdateFX(LocalPlayer.Character, v) end})
VisualTab:CreateSection("ç´°é …èª¿æ•´")
VisualTab:CreateToggle({Name = "æš—å½±ä¹‹ç¿¼ (Wings)", CurrentValue = true, Callback = function(v) Config.Wings = v; if Config.VisualsEnabled then UpdateFX(LocalPlayer.Character, true) end end})
VisualTab:CreateToggle({Name = "éœ¸æ°£ç²’å­ (Aura)", CurrentValue = true, Callback = function(v) Config.Aura = v; if Config.VisualsEnabled then UpdateFX(LocalPlayer.Character, true) end end})
VisualTab:CreateToggle({Name = "è¼ªå»“å…‰ (Highlight)", CurrentValue = true, Callback = function(v) Config.Highlight = v; if Config.VisualsEnabled then UpdateFX(LocalPlayer.Character, true) end end})
VisualTab:CreateToggle({Name = "é›·é›» (Lightning)", CurrentValue = true, Callback = function(v) Config.Lightning = v; if Config.VisualsEnabled then UpdateFX(LocalPlayer.Character, true) end end})
VisualTab:CreateToggle({Name = "å®Œå…¨éš±å½¢ (Invisible)", CurrentValue = false, Callback = function(v)
    Config.Invisible = v
    if not v and LocalPlayer.Character then 
         LocalPlayer.Character.Humanoid.DisplayDistanceType = Enum.HumanoidDisplayDistanceType.Viewer
         for _, p in pairs(LocalPlayer.Character:GetDescendants()) do
             if (p:IsA("BasePart") or p:IsA("Decal")) and p.Name ~= "HumanoidRootPart" then p.Transparency = 0 end
         end
    end
end})
VisualTab:CreateToggle({Name = "ESP", CurrentValue = false, Callback = function(v) Config.ESP = v end})

--------------------------------------------------------------------------------
-- 3. æ ¸å¿ƒå¾ªç’°
--------------------------------------------------------------------------------
HuntBtn.MouseButton1Click:Connect(function() Config.FlingEnabled = not Config.FlingEnabled; if Config.FlingEnabled then HuntBtn.Text="åœæ­¢"; StartFling() else HuntBtn.Text="æ¯€æ»…"; StopFling() end end)
InvisBtn.MouseButton1Click:Connect(function() Config.Invisible = not Config.Invisible; if Config.Invisible then InvisBtn.Text="ç¾èº«" else InvisBtn.Text="éš±å½¢" end end)

RunService.RenderStepped:Connect(function()
    local Char = LocalPlayer.Character
    if not Char or not Char:FindFirstChild("HumanoidRootPart") then return end
    
    -- 1. [ç›¸ä½ç©¿é€ç”©é£›]
    if Config.FlingEnabled and Config.CurrentTarget then
        local TChar = Config.CurrentTarget.Character
        if TChar and TChar:FindFirstChild("HumanoidRootPart") then
            -- åœ¨ç›®æ¨™å…§éƒ¨é«˜é€ŸæŠ–å‹•ï¼Œè§¸ç™¼ç‰©ç†ç¢°æ’
            local jitter = Vector3.new(math.random(-15, 15)/10, -1, math.random(-15, 15)/10)
            Char.HumanoidRootPart.CFrame = TChar.HumanoidRootPart.CFrame * CFrame.new(jitter)
            Char.HumanoidRootPart.Velocity = Vector3.new(0, 0, 0)
        else
            Config.FlingEnabled = false; StopFling()
        end
    end
    
    -- 2. [éš±å½¢]
    if Config.Invisible then
        if Char:FindFirstChild("Humanoid") then Char.Humanoid.DisplayDistanceType = Enum.HumanoidDisplayDistanceType.None end
        for _, v in pairs(Char:GetDescendants()) do
            if v:IsA("BasePart") and v.Name ~= "HumanoidRootPart" then v.Transparency = 1; v.CanCollide = false end
            if v:IsA("Decal") then v.Transparency = 1 end
        end
    end
    
    -- 3. [ESP]
    if Config.ESP then
        for _, p in pairs(Players:GetPlayers()) do
            if p ~= LocalPlayer and p.Character and p.Character:FindFirstChild("Head") and not p.Character:FindFirstChild("ZN_ESP") then
                local bb = Instance.new("BillboardGui", p.Character.Head); bb.Name = "ZN_ESP"; bb.Size = UDim2.new(0,100,0,50); bb.AlwaysOnTop = true
                local t = Instance.new("TextLabel", bb); t.Size = UDim2.new(1,0,1,0); t.BackgroundTransparency=1; t.TextColor3 = Color3.new(1,0,0); t.Text = p.Name
            end
        end
    else
        for _, p in pairs(Players:GetPlayers()) do if p.Character and p.Character:FindFirstChild("ZN_ESP") then p.Character.ZN_ESP:Destroy() end end
    end
end)

RunService.Heartbeat:Connect(function()
    local Char = LocalPlayer.Character
    if not Char then return end
    local Humanoid = Char:FindFirstChild("Humanoid")
    local Root = Char:FindFirstChild("HumanoidRootPart")
    
    if Config.SpeedEnabled and Humanoid then Humanoid.WalkSpeed = Config.Speed end
    if Config.Noclip or Config.FlingEnabled then
        for _, part in pairs(Char:GetChildren()) do if part:IsA("BasePart") then part.CanCollide = false end end
    end
    
    -- 4. [é˜²è™›ç©ºæ ¸å¿ƒ (Anti-Void)]
    if Config.AntiVoid and Root then
        if Root.Position.Y < Config.VoidHeight then
            -- åµæ¸¬åˆ°æ‰è½ï¼ŒåŸ·è¡Œæ•‘æ´
            local savedPos = CFrame.new(Root.Position.X, 50, Root.Position.Z) -- æ‹‰å› Y=50 çš„é«˜åº¦
            Root.CFrame = savedPos
            Root.Velocity = Vector3.new(0,0,0) -- æ­¸é›¶é€Ÿåº¦
            Root.AssemblyLinearVelocity = Vector3.new(0,0,0)
            
            -- å¦‚æœæ­£åœ¨è™•æ±ºï¼Œæš«æ™‚é—œé–‰è™•æ±ºä»¥å…ç„¡é™å¾ªç’°æ‰è½
            if Config.FlingEnabled then
                Config.FlingEnabled = false
                StopFling()
                HuntBtn.Text = "æ¯€æ»…"
                Rayfield:Notify({Title = "é˜²è™›ç©ºè§¸ç™¼", Content = "å·²å°‡æ‚¨æ‹‰å›å®‰å…¨å€åŸŸ", Duration = 3})
            end
        end
    end

    -- Hitbox
    if Config.Hitbox then
        for _, p in pairs(Players:GetPlayers()) do
            if p ~= LocalPlayer and p.Character and p.Character:FindFirstChild("Head") then
                p.Character.Head.Size = Vector3.new(Config.HitboxSize, Config.HitboxSize, Config.HitboxSize)
                p.Character.Head.Transparency = 0.6; p.Character.Head.CanCollide = false
            end
        end
    end
end)

LocalPlayer.CharacterAdded:Connect(function(newChar) task.wait(1); if Config.VisualsEnabled then UpdateFX(newChar, true) end end)
Rayfield:Notify({Title = "ETERNAL v15", Content = "æš—å½±ä¹‹ç¿¼å±•é–‹ã€‚é˜²è™›ç©ºç³»çµ±å·²ä¸Šç·šã€‚", Duration = 5})
