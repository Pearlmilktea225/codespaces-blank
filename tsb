-- [[ ğŸ§‹ çå¥¶è…³æœ¬ | TSB æ‰‹æ©Ÿå°ˆæ¥­é‡è£½ç‰ˆ ]] --
-- [[ è£½ä½œè€… BY çå¥¶ ]] --

do
    if not game:IsLoaded() then game.Loaded:Wait() end
    
    local Players = game:GetService("Players")
    local RunService = game:GetService("RunService")
    local UserInputService = game:GetService("UserInputService")
    local Workspace = game:GetService("Workspace")
    local CoreGui = game:GetService("CoreGui")
    local LocalPlayer = Players.LocalPlayer
    
    -- æ¸…ç†èˆŠä»‹é¢
    for _, g in pairs(CoreGui:GetChildren()) do
        if g.Name == "Jenna_Pro_UI" then g:Destroy() end
    end

    -- æ ¸å¿ƒåƒæ•¸è¨­å®š
    getgenv().Config = {
        Target = "",
        IsFlinging = false,
        AntiFling = false,
        AntiVoid = false,
        NoClip = false,
        CustomSpeed = 16,
        CustomJump = 50,
        AutoTrash = false,
        AntiUlt = false, -- é˜²æ­»æ‹³
        SavedPosition = nil
    }

    -- ==========================================
    -- ğŸ¨ å°ˆæ¥­ç‰ˆ GUI ä»‹é¢è¨­è¨ˆ (æ‰‹æ©Ÿå‹å–„, ç°¡æ½”æš—é»‘é¢¨)
    -- ==========================================
    local ScreenGui = Instance.new("ScreenGui")
    ScreenGui.Name = "Jenna_Pro_UI"
    ScreenGui.Parent = CoreGui
    ScreenGui.IgnoreGuiInset = true

    local MainFrame = Instance.new("Frame", ScreenGui)
    MainFrame.Size = UDim2.new(0, 400, 0, 500) -- æ›´é©åˆæ‰‹æ©Ÿè¢å¹•çš„æ¯”ä¾‹
    MainFrame.Position = UDim2.new(0.5, -200, 0.5, -250)
    MainFrame.BackgroundColor3 = Color3.fromRGB(15, 15, 18)
    MainFrame.Active = true
    MainFrame.Draggable = true
    Instance.new("UICorner", MainFrame).CornerRadius = UDim.new(0, 12)
    Instance.new("UIStroke", MainFrame).Color = Color3.fromRGB(200, 150, 180)
    Instance.new("UIStroke", MainFrame).Thickness = 1.5

    local Header = Instance.new("Frame", MainFrame)
    Header.Size = UDim2.new(1, 0, 0, 45)
    Header.BackgroundColor3 = Color3.fromRGB(25, 25, 30)
    Instance.new("UICorner", Header).CornerRadius = UDim.new(0, 12)
    
    -- éš±è—ä¸‹åŠéƒ¨åœ“è§’ï¼Œè®“ Header èˆ‡ MainFrame è²¼åˆ
    local HeaderBlocker = Instance.new("Frame", Header)
    HeaderBlocker.Size = UDim2.new(1, 0, 0, 10)
    HeaderBlocker.Position = UDim2.new(0, 0, 1, -10)
    HeaderBlocker.BackgroundColor3 = Color3.fromRGB(25, 25, 30)
    HeaderBlocker.BorderSizePixel = 0

    local Title = Instance.new("TextLabel", Header)
    Title.Size = UDim2.new(1, 0, 1, 0)
    Title.BackgroundTransparency = 1
    Title.Text = "ğŸ§‹ çå¥¶è…³æœ¬ PRO"
    Title.TextColor3 = Color3.fromRGB(255, 255, 255)
    Title.Font = Enum.Font.GothamBold
    Title.TextSize = 18

    local Container = Instance.new("ScrollingFrame", MainFrame)
    Container.Size = UDim2.new(1, -20, 1, -55)
    Container.Position = UDim2.new(0, 10, 0, 50)
    Container.BackgroundTransparency = 1
    Container.ScrollBarThickness = 2
    local UIList = Instance.new("UIListLayout", Container)
    UIList.Padding = UDim.new(0, 8)
    Container.AutomaticCanvasSize = Enum.AutomaticSize.Y

    -- // UI ç”Ÿæˆå·¥å…· //
    local function CreateSection(text)
        local Label = Instance.new("TextLabel", Container)
        Label.Text = text
        Label.Size = UDim2.new(1, 0, 0, 25)
        Label.BackgroundTransparency = 1
        Label.TextColor3 = Color3.fromRGB(160, 160, 160)
        Label.Font = Enum.Font.GothamBold
        Label.TextXAlignment = Enum.TextXAlignment.Left
        Label.TextSize = 14
    end

    local function CreateToggle(text, callback)
        local Frame = Instance.new("Frame", Container)
        Frame.Size = UDim2.new(1, 0, 0, 45) -- å¢å¤§æŒ‰éˆ•é©åˆæ‰‹æ©Ÿé»æ“Š
        Frame.BackgroundColor3 = Color3.fromRGB(22, 22, 28)
        Instance.new("UICorner", Frame).CornerRadius = UDim.new(0, 8)
        
        local Label = Instance.new("TextLabel", Frame)
        Label.Text = "  " .. text
        Label.Size = UDim2.new(0.7, 0, 1, 0)
        Label.BackgroundTransparency = 1
        Label.TextColor3 = Color3.new(1, 1, 1)
        Label.Font = Enum.Font.Gotham
        Label.TextXAlignment = Enum.TextXAlignment.Left
        Label.TextSize = 13
        
        local Button = Instance.new("TextButton", Frame)
        Button.Size = UDim2.new(0, 70, 0, 30)
        Button.Position = UDim2.new(1, -80, 0.5, -15)
        Button.BackgroundColor3 = Color3.fromRGB(40, 40, 45)
        Button.Text = "é—œé–‰"
        Button.TextColor3 = Color3.fromRGB(200, 100, 100)
        Button.Font = Enum.Font.GothamBold
        Instance.new("UICorner", Button).CornerRadius = UDim.new(0, 6)
        
        local Toggled = false
        Button.MouseButton1Click:Connect(function()
            Toggled = not Toggled
            Button.Text = Toggled and "é–‹å•Ÿ" or "é—œé–‰"
            Button.BackgroundColor3 = Toggled and Color3.fromRGB(80, 180, 100) or Color3.fromRGB(40, 40, 45)
            Button.TextColor3 = Toggled and Color3.new(1,1,1) or Color3.fromRGB(200, 100, 100)
            callback(Toggled)
        end)
    end

    local function CreateInput(placeholder, callback)
        local Box = Instance.new("TextBox", Container)
        Box.Size = UDim2.new(1, 0, 0, 40)
        Box.BackgroundColor3 = Color3.fromRGB(30, 30, 35)
        Box.PlaceholderText = placeholder
        Box.Text = ""
        Box.TextColor3 = Color3.fromRGB(255, 255, 255)
        Box.Font = Enum.Font.Gotham
        Box.TextSize = 13
        Instance.new("UICorner", Box).CornerRadius = UDim.new(0, 8)
        Box.FocusLost:Connect(function() callback(Box.Text) end)
    end

    -- ==========================================
    -- ğŸš€ æ ¸å¿ƒåŠŸèƒ½èˆ‡é‚è¼¯
    -- ==========================================

    CreateSection("ğŸ¯ æˆ°é¬¥èˆ‡è¿½æ“Š")
    CreateInput("è¼¸å…¥ç›®æ¨™åç¨± (ä¾‹: Player123)", function(val) getgenv().Config.Target = val end)
    
    local FlingConn
    CreateToggle("çµ‚æ¥µé»è‘—ç”©é£› (æ­»äº¡è‡ªå‹•çºŒé€£)", function(state)
        getgenv().Config.IsFlinging = state
        if state then
            -- è¨˜éŒ„èµ·å§‹ä½ç½®ä»¥ä¾¿é—œé–‰æ™‚æ­¸ä½
            local Char = LocalPlayer.Character
            if Char and Char:FindFirstChild("HumanoidRootPart") then
                getgenv().Config.SavedPosition = Char.HumanoidRootPart.CFrame
            end
            
            FlingConn = RunService.Heartbeat:Connect(function()
                if not getgenv().Config.IsFlinging then return end
                local LP = Players.LocalPlayer
                local C = LP.Character
                
                -- å°‹æ‰¾ç›®æ¨™
                local TargetPlr
                for _, v in pairs(Players:GetPlayers()) do
                    if v ~= LP and string.sub(v.Name:lower(), 1, #getgenv().Config.Target) == getgenv().Config.Target:lower() then 
                        TargetPlr = v break 
                    end
                end

                if C and C:FindFirstChild("HumanoidRootPart") and TargetPlr and TargetPlr.Character and TargetPlr.Character:FindFirstChild("HumanoidRootPart") then
                    local TRP = TargetPlr.Character.HumanoidRootPart
                    local LRP = C.HumanoidRootPart
                    
                    LRP.CFrame = TRP.CFrame
                    -- ç‰©ç†ä¿®å¾©ï¼šå–æ¶ˆç·šæ€§äº‚é£›ï¼Œæ”¹ç”¨æ¥µé«˜æ—‹è½‰è§’é€Ÿåº¦
                    LRP.AssemblyLinearVelocity = Vector3.new(0, 0, 0)
                    LRP.AssemblyAngularVelocity = Vector3.new(50000, 50000, 50000)
                    
                    for _, p in pairs(C:GetDescendants()) do
                        if p:IsA("BasePart") then p.CanCollide = false p.Massless = true end
                    end
                end
            end)
        else
            if FlingConn then FlingConn:Disconnect() end
            local C = LocalPlayer.Character
            if C and C:FindFirstChild("HumanoidRootPart") then
                C.HumanoidRootPart.Velocity = Vector3.zero
                C.HumanoidRootPart.AssemblyAngularVelocity = Vector3.zero
                if getgenv().Config.SavedPosition then
                    task.wait(0.1)
                    C.HumanoidRootPart.CFrame = getgenv().Config.SavedPosition
                end
            end
        end
    end)

    -- æ­»äº¡å¾Œè‡ªå‹•é‡å•Ÿç”©é£›
    LocalPlayer.CharacterAdded:Connect(function(newChar)
        if getgenv().Config.IsFlinging then
            task.wait(1.5) -- ç­‰å¾…è§’è‰²å®Œå…¨åŠ è¼‰èˆ‡ç„¡æ•µæ™‚é–“
            game.StarterGui:SetCore("SendNotification", {Title = "å¾©æ´»", Text = "ç¹¼çºŒè¿½æ“Šç›®æ¨™...", Duration = 2})
        end
        
        -- é˜²æ­»æ‹³çš„è¡€é‡ç›£æ§é‡ç½®
        local Hum = newChar:WaitForChild("Humanoid")
        Hum.HealthChanged:Connect(function(newHealth)
            if getgenv().Config.AntiUlt then
                -- å¦‚æœç¬é–“è¡€é‡æ‰è½è¶…é 40 (æ­»æ‹³/å¤§æ‹›ç‰¹å¾µ)
                if Hum.MaxHealth - newHealth > 40 or newHealth < 15 then
                    local RP = newChar:FindFirstChild("HumanoidRootPart")
                    if RP then
                        -- ç¬é–“å‚³é€åˆ°æ¥µé™è™›ç©ºï¼Œå°‡æ’­æ”¾å‹•ç•«çš„æ•µäººä¸€èµ·æ‹‰ä¸‹å»æ­»
                        RP.CFrame = CFrame.new(0, -500, 0)
                        RP.Velocity = Vector3.zero
                    end
                end
            end
        end)
    end)

    CreateSection("ğŸ›¡ï¸ é˜²è­·èˆ‡ç‰©ç†æ©Ÿåˆ¶")
    
    -- é˜²æ­»æ‹³ (åŒæ­¸æ–¼ç›¡)
    CreateToggle("é˜²æ­»æ‹³/å¤§æ‹› (å°‡æ•µäººæ‹–å…¥è™›ç©ºæ®º)", function(state)
        getgenv().Config.AntiUlt = state
        -- ç‚ºç•¶å‰è§’è‰²ç¶å®šè¡€é‡ç›£æ§
        local Char = LocalPlayer.Character
        if Char and Char:FindFirstChild("Humanoid") then
            local Hum = Char.Humanoid
            Hum.HealthChanged:Connect(function(newHealth)
                if getgenv().Config.AntiUlt then
                    if Hum.MaxHealth - newHealth > 40 or newHealth < 15 then
                        local RP = Char:FindFirstChild("HumanoidRootPart")
                        if RP then
                            RP.CFrame = CFrame.new(0, -500, 0)
                            RP.Velocity = Vector3.zero
                        end
                    end
                end
            end)
        end
    end)

    -- çµ•å°é˜²è™›ç©º (ä¿®æ­£ç‰ˆ)
    CreateToggle("çµ•å°é˜²è™›ç©º (é˜²æ‰è½åˆ¤å®š)", function(state) getgenv().Config.AntiVoid = state end)
    
    -- ç©¿ç‰†
    CreateToggle("ç©¿ç‰†æ¨¡å¼ (NoClip)", function(state) getgenv().Config.NoClip = state end)

    -- é˜²å½ˆé£›
    CreateToggle("é˜²å½ˆé£› (é˜²æ­¢è¢«ä»–äººç•°å¸¸æ“Šé£›)", function(state) getgenv().Config.AntiFling = state end)

    RunService.Stepped:Connect(function()
        local Char = LocalPlayer.Character
        if not Char or not Char:FindFirstChild("HumanoidRootPart") then return end
        
        -- é˜²è™›ç©ºé‚è¼¯ (ä¸€æ—¦ä½æ–¼ -20 ç¬é–“å‚³é€å›é«˜ç©º)
        if getgenv().Config.AntiVoid and Char.HumanoidRootPart.Position.Y < -20 then
            -- æ’é™¤æˆ‘å€‘è‡ªå·±è§¸ç™¼é˜²æ­»æ‹³çš„æƒ…æ³ (-400ä»¥ä¸‹)
            if Char.HumanoidRootPart.Position.Y > -400 then 
                Char.HumanoidRootPart.Velocity = Vector3.zero
                Char.HumanoidRootPart.CFrame = CFrame.new(Char.HumanoidRootPart.Position.X, 100, Char.HumanoidRootPart.Position.Z)
            end
        end

        -- ç©¿ç‰†é‚è¼¯
        if getgenv().Config.NoClip then
            for _, part in pairs(Char:GetDescendants()) do
                if part:IsA("BasePart") and part.CanCollide then
                    part.CanCollide = false
                end
            end
        end

        -- é˜²å½ˆé£›é‚è¼¯ (é€Ÿåº¦ç•°å¸¸å¤§æ™‚ç¬é–“å‡çµ)
        if getgenv().Config.AntiFling and not getgenv().Config.IsFlinging then
            if Char.HumanoidRootPart.Velocity.Magnitude > 200 then
                Char.HumanoidRootPart.Velocity = Vector3.zero
                Char.HumanoidRootPart.AssemblyAngularVelocity = Vector3.zero
            end
        end
    end)

    CreateSection("âš¡ æ•¸å€¼èˆ‡è‡ªå‹•åŒ– (æ‰‹æ©Ÿå°ˆç”¨)")
    
    CreateInput("ä¿®æ”¹ç§»å‹•é€Ÿåº¦ (é è¨­ 16)", function(val) getgenv().Config.CustomSpeed = tonumber(val) or 16 end)
    RunService.RenderStepped:Connect(function()
        local Char = LocalPlayer.Character
        if Char and Char:FindFirstChild("Humanoid") and Char:FindFirstChild("HumanoidRootPart") then
            if getgenv().Config.CustomSpeed > 16 then
                local MoveDir = Char.Humanoid.MoveDirection
                if MoveDir.Magnitude > 0 then
                    Char.HumanoidRootPart.CFrame = Char.HumanoidRootPart.CFrame + (MoveDir * (getgenv().Config.CustomSpeed / 100))
                end
            end
        end
    end)

    CreateInput("ä¿®æ”¹è·³èºé«˜åº¦ (é è¨­ 50)", function(val) getgenv().Config.CustomJump = tonumber(val) or 50 end)
    local isJumping = false
    UserInputService.JumpRequest:Connect(function()
        if getgenv().Config.CustomJump > 50 and not isJumping then
            isJumping = true
            local Char = LocalPlayer.Character
            if Char and Char:FindFirstChild("HumanoidRootPart") then
                Char.HumanoidRootPart.Velocity = Vector3.new(Char.HumanoidRootPart.Velocity.X, getgenv().Config.CustomJump, Char.HumanoidRootPart.Velocity.Z)
            end
            task.wait(0.2)
            isJumping = false
        end
    end)

    -- å…¨è‡ªå‹•æ’¿åƒåœ¾ (æ‰‹æ©Ÿå…é»æ“Šç‰ˆ)
    CreateToggle("å…¨è‡ªå‹•æ’¿åƒåœ¾ (ç„¡é ˆé»æ“Š)", function(state)
        getgenv().Config.AutoTrash = state
        if state then
            task.spawn(function()
                while getgenv().Config.AutoTrash do
                    task.wait(2) -- æ¯å…©ç§’æƒæä¸€æ¬¡
                    local Char = LocalPlayer.Character
                    if Char and Char:FindFirstChild("HumanoidRootPart") then
                        local targetTrash = nil
                        for _, obj in pairs(Workspace:GetDescendants()) do
                            if obj:IsA("ProximityPrompt") and string.find(obj.Parent.Name:lower(), "trash") then
                                targetTrash = obj
                                break
                            end
                        end

                        if targetTrash then
                            local origPos = Char.HumanoidRootPart.CFrame
                            Char.HumanoidRootPart.CFrame = targetTrash.Parent.CFrame
                            task.wait(0.2)
                            fireproximityprompt(targetTrash)
                            task.wait(0.1)
                            Char.HumanoidRootPart.CFrame = origPos
                        end
                    end
                end
            end)
        end
    end)

    -- ==========================================
    -- ğŸªŸ æ‡¸æµ®ç¸®æ”¾æŒ‰éˆ• (æ‰‹æ©Ÿåœ“å½¢ Icon)
    -- ==========================================
    local ToggleBtn = Instance.new("ImageButton", ScreenGui)
    ToggleBtn.Size = UDim2.new(0, 50, 0, 50)
    ToggleBtn.Position = UDim2.new(0.05, 0, 0.05, 0)
    ToggleBtn.BackgroundColor3 = Color3.fromRGB(20, 20, 25)
    ToggleBtn.Image = "rbxassetid://13465637257"
    Instance.new("UICorner", ToggleBtn).CornerRadius = UDim.new(1, 0) -- å®Œç¾çš„åœ“å½¢
    Instance.new("UIStroke", ToggleBtn).Color = Color3.fromRGB(200, 150, 180)
    Instance.new("UIStroke", ToggleBtn).Thickness = 2
    
    local Open = true
    ToggleBtn.MouseButton1Click:Connect(function()
        Open = not Open
        MainFrame.Visible = Open
    end)

    -- è®“åœ“å½¢åœ–æ¨™å¯ä»¥æ‹–æ›³
    local dragToggle, dragInput, dragStart, startPos
    ToggleBtn.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragToggle = true
            dragStart = input.Position
            startPos = ToggleBtn.Position
        end
    end)
    ToggleBtn.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
            dragInput = input
        end
    end)
    UserInputService.InputChanged:Connect(function(input)
        if input == dragInput and dragToggle then
            local delta = input.Position - dragStart
            ToggleBtn.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
        end
    end)
    UserInputService.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragToggle = false
        end
    end)

end
