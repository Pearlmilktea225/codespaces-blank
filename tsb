--[[
    çå¥¶è…³æœ¬ (ZhenNai Hub) - æ——è‰¦å®Œå…¨é«”
    ç‰ˆæœ¬ï¼šSYSTEM: MONARCH v5.0
    é¢¨æ ¼ï¼šç¨è‡ªå‡ç´š (Solo Leveling)
    é©é…ï¼šæ‰‹æ©Ÿè§¸æ§èˆ‡é›»è…¦
]]

local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

--------------------------------------------------------------------------------
-- 1. ç³»çµ±è¦–çª—èˆ‡ä¸»é¡Œè¨­è¨ˆ
--------------------------------------------------------------------------------
local Window = Rayfield:CreateWindow({
    Name = "çå¥¶è…³æœ¬ | SYSTEM: MONARCH",
    LoadingTitle = "æ­£åœ¨å•Ÿå‹•ç©å®¶æ¬Šé™ï¼šæˆæŒ¯å®‡...",
    LoadingSubtitle = "ç­‰ç´šï¼šçœŸç¥ - è£½ä½œè€…ï¼šçå¥¶",
    ConfigurationSaving = {
        Enabled = true,
        FolderName = "ZhenNai_Eternal_X",
        FileName = "Config"
    },
    Discord = { Enabled = false },
    KeySystem = false, 
})

-- å¼•ç”¨æœå‹™
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local Camera = game.Workspace.CurrentCamera
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local Lighting = game:GetService("Lighting")

-- è…³æœ¬é…ç½®
local Config = {
    -- æˆ°é¬¥ç³»çµ±
    Aimbot = false, Aiming = false, FOV = 180, Smooth = 0.5,
    Hitbox = false, HitboxSize = 7, Reach = 15, ReachEnabled = false,
    AutoBlock = false, AntiGrip = true,
    -- ç‰©ç†çµæ®º (ç”©é£›)
    FlingEnabled = false, FlingPower = 3500, FlingTarget = nil,
    -- ç¨è‡ªå‡ç´šç‰¹æ•ˆ
    ShadowTrail = false, ESP = false, Fullbright = false,
    -- è§’è‰²å¼·åŒ–
    Speed = 40, SpeedEnabled = false, InfJump = false, GodMode = false,
    FlyEnabled = false, Flying = false
}

--------------------------------------------------------------------------------
-- 2. æ‰‹æ©Ÿç‰ˆå°ˆç”¨ï¼šå½±ä¹‹æ§åˆ¶å° (Mobile UI)
--------------------------------------------------------------------------------
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "ZhenNai_System_Overlay"
ScreenGui.Parent = game.CoreGui

local function CreateShadowButton(name, pos, text, color)
    local btn = Instance.new("TextButton")
    btn.Name = name
    btn.Parent = ScreenGui
    btn.Size = UDim2.new(0, 75, 0, 75)
    btn.Position = pos
    btn.BackgroundColor3 = Color3.fromRGB(5, 5, 20)
    btn.BackgroundTransparency = 0.3
    btn.Text = text
    btn.TextColor3 = color
    btn.Font = Enum.Font.GothamBold
    btn.TextSize = 16
    btn.Visible = false
    
    local corner = Instance.new("UICorner", btn)
    corner.CornerRadius = UDim.new(1, 0)
    
    local stroke = Instance.new("UIStroke", btn)
    stroke.Color = color
    stroke.Thickness = 2
    
    return btn, stroke
end

-- å»ºç«‹è‡ªç„èˆ‡ç”©é£›æŒ‰éˆ•
local AimBtn, AimStroke = CreateShadowButton("AimBtn", UDim2.new(0.82, 0, 0.45, 0), "é–å®š", Color3.fromRGB(0, 180, 255))
local HuntBtn, HuntStroke = CreateShadowButton("HuntBtn", UDim2.new(0.82, 0, 0.6, 0), "çµæ®º", Color3.fromRGB(150, 0, 255))

-- æŒ‰éˆ•äº’å‹•
AimBtn.MouseButton1Down:Connect(function() Config.Aiming = true AimBtn.Text = "çµæ®ºä¸­" AimStroke.Color = Color3.fromRGB(255, 0, 0) end)
AimBtn.MouseButton1Up:Connect(function() Config.Aiming = false AimBtn.Text = "é–å®š" AimStroke.Color = Color3.fromRGB(0, 180, 255) end)

HuntBtn.MouseButton1Down:Connect(function() 
    Config.FlingEnabled = true 
    HuntBtn.Text = "æ‘§æ¯€" 
    HuntStroke.Color = Color3.fromRGB(255, 255, 255)
    -- è‡ªå‹•é–å®šæœ€è¿‘æ•µäºº
    local minDist = 500
    Config.FlingTarget = nil
    for _, p in pairs(Players:GetPlayers()) do
        if p ~= LocalPlayer and p.Character and p.Character:FindFirstChild("HumanoidRootPart") then
            local d = (p.Character.HumanoidRootPart.Position - LocalPlayer.Character.HumanoidRootPart.Position).Magnitude
            if d < minDist then
                minDist = d
                Config.FlingTarget = p.Character.HumanoidRootPart
            end
        end
    end
end)
HuntBtn.MouseButton1Up:Connect(function() Config.FlingEnabled = false Config.FlingTarget = nil HuntBtn.Text = "çµæ®º" HuntStroke.Color = Color3.fromRGB(150, 0, 255) end)

--------------------------------------------------------------------------------
-- 3. é¸å–®åˆ†é è¨­è¨ˆ
--------------------------------------------------------------------------------
local CombatTab = Window:CreateTab("ğŸ—¡ï¸ å›ç‹æ¬Šèƒ½", 4483362458)
local VisualTab = Window:CreateTab("ğŸ‘ï¸ å½±å­è¦–è¦º", 4483362458)
local PlayerTab = Window:CreateTab("ğŸƒ ç©å®¶å±¬æ€§", 4483362458)

-- [å›ç‹æ¬Šèƒ½]
CombatTab:CreateSection("çµæ®ºæ¨¡å¼ (Lock-on Fling)")
CombatTab:CreateToggle({
    Name = "é–‹å•Ÿçµæ®ºæŒ‰éˆ• (ç”©é£›)",
    CurrentValue = false,
    Callback = function(v) HuntBtn.Visible = v end,
})
CombatTab:CreateSlider({
    Name = "ç”©é£›æ—‹è½‰å¼·åº¦",
    Range = {1000, 8000}, Increment = 500, CurrentValue = 3500,
    Callback = function(v) Config.FlingPower = v end,
})

CombatTab:CreateSection("æˆ°é¬¥è¼”åŠ©")
CombatTab:CreateToggle({
    Name = "é–‹å•Ÿé–å®šæŒ‰éˆ• (è‡ªç„)",
    CurrentValue = false,
    Callback = function(v) Config.Aimbot = v AimBtn.Visible = v end,
})
CombatTab:CreateToggle({
    Name = "å½±ä¹‹æå– (å¤§é ­åˆ¤å®š)",
    CurrentValue = false,
    Callback = function(v) Config.Hitbox = v end,
})

-- [å½±å­è¦–è¦º]
VisualTab:CreateSection("ç³»çµ±æ¨™è¨˜")
VisualTab:CreateToggle({
    Name = "æ¨™è¨˜å½±å­ (ESP)",
    CurrentValue = false,
    Callback = function(v) Config.ESP = v end,
})
VisualTab:CreateToggle({
    Name = "å›ç‹æ®˜å½± (Shadow Trail)",
    CurrentValue = false,
    Callback = function(v) Config.ShadowTrail = v end,
})
VisualTab:CreateToggle({
    Name = "å…¨äº®æ¨¡å¼ (Fullbright)",
    CurrentValue = false,
    Callback = function(v)
        Config.Fullbright = v
        if v then Lighting.Brightness = 2 Lighting.Ambient = Color3.fromRGB(255,255,255) else Lighting.Brightness = 1 Lighting.Ambient = Color3.fromRGB(127,127,127) end
    end,
})

-- [ç©å®¶å±¬æ€§]
PlayerTab:CreateSection("ç´ è³ªä¿®æ”¹")
PlayerTab:CreateToggle({
    Name = "ä¸Šå¸æ¨¡å¼ (God Mode)",
    CurrentValue = false,
    Callback = function(v) Config.GodMode = v end,
})
PlayerTab:CreateSlider({
    Name = "ç§»å‹•é€Ÿåº¦",
    Range = {16, 200}, Increment = 5, CurrentValue = 40,
    Callback = function(v) Config.Speed = v end,
})
PlayerTab:CreateToggle({
    Name = "å•Ÿç”¨é€Ÿåº¦",
    CurrentValue = false,
    Callback = function(v) Config.SpeedEnabled = v end,
})
PlayerTab:CreateToggle({
    Name = "ç„¡é™é€£è·³",
    CurrentValue = false,
    Callback = function(v) Config.InfJump = v end,
})

--------------------------------------------------------------------------------
-- 4. æ ¸å¿ƒé‚è¼¯è™•ç† (ç‰©ç†èˆ‡è¦–è¦º)
--------------------------------------------------------------------------------

-- æ®˜å½±ç”Ÿæˆå™¨
task.spawn(function()
    while task.wait(0.1) do
        if Config.ShadowTrail and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
            for _, v in pairs(LocalPlayer.Character:GetChildren()) do
                if v:IsA("BasePart") and v.Name ~= "HumanoidRootPart" then
                    local clone = Instance.new("Part", workspace)
                    clone.Size, clone.CFrame, clone.Anchored, clone.CanCollide = v.Size, v.CFrame, true, false
                    clone.Material, clone.Color, clone.Transparency = Enum.Material.Neon, Color3.fromRGB(40, 0, 110), 0.5
                    TweenService:Create(clone, TweenInfo.new(0.5), {Transparency = 1}):Play()
                    game.Debris:AddItem(clone, 0.5)
                end
            end
        end
    end
end)

-- ç‰©ç†ä¸»å¾ªç’° (ç”©é£›èˆ‡è‡ªç„)
RunService.Heartbeat:Connect(function()
    if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
        local Root = LocalPlayer.Character.HumanoidRootPart
        
        -- é€Ÿåº¦èˆ‡ç”Ÿå‘½
        if Config.SpeedEnabled then LocalPlayer.Character.Humanoid.WalkSpeed = Config.Speed end
        if Config.GodMode then LocalPlayer.Character.Humanoid.Health = 100 end

        -- è¿½è¹¤ç”©é£›é‚è¼¯
        if Config.FlingEnabled then
            for _, part in pairs(LocalPlayer.Character:GetChildren()) do
                if part:IsA("BasePart") then part.CanCollide = false end
            end
            if Config.FlingTarget and Config.FlingTarget.Parent then
                Root.CFrame = Config.FlingTarget.CFrame * CFrame.new(0, 0, 1)
            end
            Root.Velocity = Vector3.new(0, Config.FlingPower, 0)
            Root.RotVelocity = Vector3.new(Config.FlingPower, Config.FlingPower, Config.FlingPower)
        end
    end
end)

RunService.RenderStepped:Connect(function()
    -- è‡ªç„é–å®š
    if Config.Aimbot and Config.Aiming then
        local target = nil
        local dist = Config.FOV
        for _, p in pairs(Players:GetPlayers()) do
            if p ~= LocalPlayer and p.Character and p.Character:FindFirstChild("Head") then
                local pos, vis = Camera:WorldToViewportPoint(p.Character.Head.Position)
                if vis then
                    local mag = (Vector2.new(pos.X, pos.Y) - Vector2.new(Camera.ViewportSize.X/2, Camera.ViewportSize.Y/2)).Magnitude
                    if mag < dist then target = p.Character.Head dist = mag end
                end
            end
        end
        if target then
            Camera.CFrame = CFrame.new(Camera.CFrame.Position, target.Position)
        end
    end

    -- ESP & Hitbox
    for _, p in pairs(Players:GetPlayers()) do
        if p ~= LocalPlayer and p.Character then
            if Config.ESP and not p.Character:FindFirstChild("ShadowHighlight") then
                local hl = Instance.new("Highlight", p.Character)
                hl.Name = "ShadowHighlight"
                hl.FillColor = Color3.fromRGB(0, 10, 50)
                hl.OutlineColor = Color3.fromRGB(0, 200, 255)
            elseif not Config.ESP and p.Character:FindFirstChild("ShadowHighlight") then
                p.Character.ShadowHighlight:Destroy()
            end
            
            if Config.Hitbox and p.Character:FindFirstChild("Head") then
                p.Character.Head.Size = Vector3.new(Config.HitboxSize, Config.HitboxSize, Config.HitboxSize)
                p.Character.Head.Transparency = 0.6
            end
        end
    end
end)

-- ç„¡é™è·³èº
UserInputService.JumpRequest:Connect(function()
    if Config.InfJump and LocalPlayer.Character then
        LocalPlayer.Character:FindFirstChildOfClass("Humanoid"):ChangeState("Jumping")
    end
end)

Rayfield:Notify({
    Title = "ç³»çµ±ï¼šæœ€çµ‚è¦ºé†’å®Œæˆ",
    Content = "æ­¡è¿ï¼Œé—‡å½±å›ç‹ã€‚å½±å­è»åœ˜å·²å°±ç·’ã€‚",
    Duration = 5,
})
