local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

--------------------------------------------------------------------------------
-- 1. ä»‹é¢é¡è‰²å®¢è£½åŒ– (ç¨è‡ªå‡ç´šç³»çµ±é¢¨æ ¼)
--------------------------------------------------------------------------------
local Window = Rayfield:CreateWindow({
    Name = "çå¥¶è…³æœ¬ | SYSTEM: SHADOW MONARCH",
    LoadingTitle = "æ­£åœ¨é€²è¡Œç¬¬äºŒæ¬¡è¦ºé†’...",
    LoadingSubtitle = "è£½ä½œè€…ï¼šçå¥¶ | ç­‰ç´šï¼šé—‡å½±å›ç‹",
    ConfigurationSaving = {
        Enabled = true,
        FolderName = "ZhenNai_Solo_V3",
        FileName = "Config"
    },
    Discord = { Enabled = false },
    KeySystem = false, 
})

-- å¼·åˆ¶ä¿®æ”¹ UI é¡è‰²ç‚ºã€Œæš—å½±è—ã€é¢¨æ ¼
Rayfield.Flags = {["Theme"] = "Dark"}
local ThemeColor = Color3.fromRGB(0, 162, 255) -- ç³»çµ±è¢å…‰è—

--------------------------------------------------------------------------------
-- 2. æ ¸å¿ƒæœå‹™èˆ‡è¨­å®š
--------------------------------------------------------------------------------
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local Camera = game.Workspace.CurrentCamera
local UserInputService = game:GetService("UserInputService")
local Lighting = game:GetService("Lighting")

local Config = {
    -- æˆ°é¬¥ç³»çµ±
    Aimbot = false, Aiming = false, FOV = 180, Smooth = 0.4,
    Hitbox = false, HitboxSize = 6, HitboxColor = Color3.fromRGB(150, 0, 255),
    AutoBlock = false, AntiGrip = true, NoCD = false,
    
    -- å½±å­æ¨¡çµ„ (ç¨è‡ªå‡ç´š)
    ShadowSkin = false, 
    ShadowFX = false,

    -- ç‰©ç†ç¦è¡“
    FlingEnabled = false, FlingPower = 2500, FlingLock = false,
    
    -- è§’è‰²å¼·åŒ–
    Speed = 35, SpeedEnabled = false,
    InfJump = false, Fly = false, Flying = false,
    GodMode = false,
    
    -- è¦–è¦º
    ESP = false, ESPTracers = false, Fullbright = false
}

--------------------------------------------------------------------------------
-- 3. æ‰‹æ©Ÿç‰ˆå°ˆç”¨æµ®å‹•æŒ‰éˆ• (æš—å½±ç¾åŒ–ç‰ˆ)
--------------------------------------------------------------------------------
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "ShadowSystem_V3"
ScreenGui.Parent = game.CoreGui

local function CreateShadowButton(name, pos, text, color)
    local btn = Instance.new("TextButton")
    btn.Name = name
    btn.Parent = ScreenGui
    btn.Size = UDim2.new(0, 75, 0, 75)
    btn.Position = pos
    btn.BackgroundColor3 = Color3.fromRGB(10, 10, 25)
    btn.BackgroundTransparency = 0.3
    btn.Text = text
    btn.TextColor3 = color
    btn.Font = Enum.Font.GothamBold
    btn.TextSize = 16
    btn.Visible = false
    
    local corner = Instance.new("UICorner", btn)
    corner.CornerRadius = UDim.new(1, 0)
    
    local stroke = Instance.new("UIStroke", btn)
    stroke.Color = color
    stroke.Thickness = 2
    
    return btn, stroke
end

local AimBtn, AimStroke = CreateShadowButton("AimBtn", UDim2.new(0.82, 0, 0.45, 0), "é–å®š", Color3.fromRGB(0, 180, 255))
local FlingBtn, FlingStroke = CreateShadowButton("FlingBtn", UDim2.new(0.82, 0, 0.6, 0), "ç”©é£›", Color3.fromRGB(200, 0, 255))

-- æŒ‰éˆ•é‚è¼¯
AimBtn.MouseButton1Down:Connect(function() Config.Aiming = true AimBtn.Text = "çµæ®ºä¸­" AimStroke.Color = Color3.fromRGB(255, 0, 0) end)
AimBtn.MouseButton1Up:Connect(function() Config.Aiming = false AimBtn.Text = "é–å®š" AimStroke.Color = Color3.fromRGB(0, 180, 255) end)

FlingBtn.MouseButton1Down:Connect(function() 
    Config.FlingEnabled = true 
    FlingBtn.Text = "æ‘§æ¯€" 
    FlingStroke.Color = Color3.fromRGB(255, 255, 255) 
end)
FlingBtn.MouseButton1Up:Connect(function() 
    Config.FlingEnabled = false 
    FlingBtn.Text = "ç”©é£›" 
    FlingStroke.Color = Color3.fromRGB(200, 0, 255) 
end)

--------------------------------------------------------------------------------
-- 4. ä»‹é¢åˆ†é èˆ‡åŠŸèƒ½
--------------------------------------------------------------------------------
local TabCombat = Window:CreateTab("ğŸ—¡ï¸ é—‡å½±æ¬Šèƒ½", 4483362458)
local TabShadow = Window:CreateTab("ğŸ‘¤ å½±å­è»åœ˜", 4483362458)
local TabChar = Window:CreateTab("ğŸƒ ç©å®¶å±¬æ€§", 4483362458)
local TabVisual = Window:CreateTab("ğŸ‘ï¸ å½±å­è¦–è¦º", 4483362458)

-- [æˆ°é¬¥ç³»çµ±]
TabCombat:CreateSection("æ”»æ“Šæ ¸å¿ƒ")
TabCombat:CreateToggle({
    Name = "é–‹å•Ÿçµæ®ºé–å®š (Aimbot)",
    CurrentValue = false,
    Callback = function(v) Config.Aimbot = v AimBtn.Visible = v end,
})
TabCombat:CreateToggle({
    Name = "å½±å­ç”©é£›ç¦è¡“ (Fling V2)",
    CurrentValue = false,
    Callback = function(v) FlingBtn.Visible = v end,
})
TabCombat:CreateSlider({
    Name = "ç”©é£›è½‰é€Ÿ",
    Range = {1000, 5000}, Increment = 100, CurrentValue = 2500,
    Callback = function(v) Config.FlingPower = v end,
})
TabCombat:CreateToggle({
    Name = "è‡ªå‹•å®Œç¾æ ¼æ“‹ (Auto Block)",
    CurrentValue = false,
    Callback = function(v) Config.AutoBlock = v end,
})

-- [å½±å­æ¨¡çµ„]
TabShadow:CreateSection("æˆæŒ¯å®‡é¢¨æ ¼è®Šæ›")
TabShadow:CreateToggle({
    Name = "æˆæŒ¯å®‡å»ºæ¨¡èˆ‡æš—å½±ç‰¹æ•ˆ (Saitama)",
    CurrentValue = false,
    Callback = function(v) Config.ShadowSkin = v end,
})
TabShadow:CreateToggle({
    Name = "å½±ä¹‹æå– (å¤§é ­åˆ¤å®š)",
    CurrentValue = false,
    Callback = function(v) Config.Hitbox = v end,
})
TabShadow:CreateSlider({
    Name = "æ¨™è¨˜ç¯„åœå¤§å°",
    Range = {2, 20}, Increment = 1, CurrentValue = 6,
    Callback = function(v) Config.HitboxSize = v end,
})

-- [è§’è‰²å¼·åŒ–]
TabChar:CreateSection("å›ç‹é«”åŠ›")
TabChar:CreateToggle({
    Name = "ä¸æ»…ä¹‹èº« (God Mode)",
    CurrentValue = false,
    Callback = function(v) Config.GodMode = v end,
})
TabChar:CreateToggle({
    Name = "ç¥é€Ÿç§»å‹•",
    CurrentValue = false,
    Callback = function(v) Config.SpeedEnabled = v end,
})
TabChar:CreateSlider({
    Name = "é€Ÿåº¦æ•¸å€¼",
    Range = {16, 200}, Increment = 5, CurrentValue = 35,
    Callback = function(v) Config.Speed = v end,
})
TabChar:CreateToggle({
    Name = "ç„¡é™é€£è·³ (Infinite Jump)",
    CurrentValue = false,
    Callback = function(v) Config.InfJump = v end,
})

-- [è¦–è¦ºç³»çµ±]
TabVisual:CreateSection("æ¨™è¨˜ç³»çµ±")
TabVisual:CreateToggle({
    Name = "å½±å­æ¨™è¨˜ (ESP)",
    CurrentValue = false,
    Callback = function(v) Config.ESP = v end,
})
TabVisual:CreateToggle({
    Name = "å…¨äº®æ¨¡å¼ (Fullbright)",
    CurrentValue = false,
    Callback = function(v)
        Config.Fullbright = v
        if v then Lighting.Brightness = 2 Lighting.Ambient = Color3.fromRGB(255,255,255) else Lighting.Brightness = 1 Lighting.Ambient = Color3.fromRGB(127,127,127) end
    end,
})

--------------------------------------------------------------------------------
-- 5. æ ¸å¿ƒé‚è¼¯å¾ªç’°
--------------------------------------------------------------------------------

-- ç„¡é™è·³
UserInputService.JumpRequest:Connect(function()
    if Config.InfJump and LocalPlayer.Character then
        LocalPlayer.Character:FindFirstChildOfClass("Humanoid"):ChangeState("Jumping")
    end
end)

-- ç‰©ç†èˆ‡æ¸²æŸ“ä¸»å¾ªç’°
RunService.Heartbeat:Connect(function()
    -- God Mode & Speed
    if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
        local Hum = LocalPlayer.Character.Humanoid
        if Config.GodMode then Hum.Health = 100 end
        if Config.SpeedEnabled then Hum.WalkSpeed = Config.Speed end
    end

    -- æ¥µé™ç”©é£›ç‰©ç†é‚è¼¯ (Fling)
    if Config.FlingEnabled and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
        local Root = LocalPlayer.Character.HumanoidRootPart
        -- ç§»é™¤è‡ªèº«ç¢°æ’
        for _, part in pairs(LocalPlayer.Character:GetChildren()) do
            if part:IsA("BasePart") then part.CanCollide = false end
        end
        -- é«˜é€Ÿæ—‹è½‰æ’æ“Š
        Root.Velocity = Vector3.new(0, Config.FlingPower/2.5, 0)
        Root.RotVelocity = Vector3.new(0, Config.FlingPower, 0)
        
        -- å¾®å¸é™„æ•ˆæœ (è®“ç”©é£›æ›´æº–)
        for _, p in pairs(Players:GetPlayers()) do
            if p ~= LocalPlayer and p.Character and p.Character:FindFirstChild("HumanoidRootPart") then
                local eRoot = p.Character.HumanoidRootPart
                if (Root.Position - eRoot.Position).Magnitude < 15 then
                    eRoot.Velocity = (Root.Position - eRoot.Position).Unit * 100
                end
            end
        end
    end
end)

RunService.RenderStepped:Connect(function()
    -- è‡ªç„é–å®š
    if Config.Aimbot and Config.Aiming then
        local target = nil
        local dist = Config.FOV
        for _, p in pairs(Players:GetPlayers()) do
            if p ~= LocalPlayer and p.Character and p.Character:FindFirstChild("Head") then
                local pos, vis = Camera:WorldToViewportPoint(p.Character.Head.Position)
                if vis then
                    local mag = (Vector2.new(pos.X, pos.Y) - Vector2.new(Camera.ViewportSize.X/2, Camera.ViewportSize.Y/2)).Magnitude
                    if mag < dist then target = p.Character.Head dist = mag end
                end
            end
        end
        if target then
            Camera.CFrame = CFrame.new(Camera.CFrame.Position, target.Position)
        end
    end

    -- ESP & Hitbox & Shadow Skin FX
    for _, p in pairs(Players:GetPlayers()) do
        if p ~= LocalPlayer and p.Character then
            local char = p.Character
            -- ESP
            if Config.ESP then
                if not char:FindFirstChild("SoloHighlight") then
                    local hl = Instance.new("Highlight", char)
                    hl.Name = "SoloHighlight"
                    hl.FillColor = Color3.fromRGB(0, 10, 50)
                    hl.OutlineColor = Color3.fromRGB(0, 150, 255)
                end
            else
                if char:FindFirstChild("SoloHighlight") then char.SoloHighlight:Destroy() end
            end
            
            -- å¤§é ­åˆ¤å®š (æš—ç´«è‰²é€æ˜)
            if Config.Hitbox and char:FindFirstChild("Head") then
                char.Head.Size = Vector3.new(Config.HitboxSize, Config.HitboxSize, Config.HitboxSize)
                char.Head.Transparency = 0.6
                char.Head.Color = Color3.fromRGB(100, 0, 255)
            end
        end
    end
    
    -- æˆæŒ¯å®‡ç‰¹æ•ˆ (æ”¹è‰² Hook)
    if Config.ShadowSkin then
        for _, v in pairs(game.Workspace:GetDescendants()) do
            if v:IsA("ParticleEmitter") and (v.Parent.Name:find("Effect") or v.Parent.Name:find("Hit")) then
                v.Color = ColorSequence.new(Color3.fromRGB(0, 50, 200), Color3.fromRGB(100, 0, 255))
            end
        end
    end
end)

Rayfield:Notify({
    Title = "çå¥¶è…³æœ¬ï¼šé—‡å½±å›ç‹å•Ÿå‹•",
    Content = "ä½ æ˜¯è¦æˆç‚ºçµäººï¼Œé‚„æ˜¯çµç‰©ï¼Ÿç³»çµ±å·²è¦ºé†’ã€‚",
    Duration = 5,
})
